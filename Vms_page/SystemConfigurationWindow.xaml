<Window
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:Vms_page"
        x:Class="Vms_page.SystemConfigurationWindow"
        Title="System Configuration" Height="700" Width="1200"
        Background="{DynamicResource BackgroundColor}" WindowStyle="SingleBorderWindow" ResizeMode="CanResize"
        FontFamily="Segoe UI">

    <Window.Resources>
        <!-- Top Bar Colors for Light and Dark Modes -->
        <SolidColorBrush x:Key="TopBarLightColor" Color="#F5F5F5"/>
        <SolidColorBrush x:Key="TopBarDarkColor" Color="#2D2D30"/>

        <!-- Custom Native TopBar Style -->
        <Style x:Key="NativeTopBarStyle" TargetType="{x:Type Border}">
            <Setter Property="Background" Value="{DynamicResource TopBarColor}"/>
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect Color="#000000" Direction="270" ShadowDepth="1" Opacity="0.1" BlurRadius="4"/>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Popup Button Style -->
        <Style x:Key="PopupButtonStyle" TargetType="{x:Type Button}">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="{DynamicResource TextPrimaryColor}"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="8,6"/>
            <Setter Property="HorizontalAlignment" Value="Stretch"/>
            <Setter Property="HorizontalContentAlignment" Value="Left"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type Button}">
                        <Border Background="{TemplateBinding Background}" 
                                CornerRadius="2"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" 
                                            VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="{DynamicResource BorderColor}"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Background" Value="{DynamicResource TextSecondaryColor}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Card Shadow Effect -->
        <DropShadowEffect x:Key="CardShadow" 
                          Color="#000000" 
                          Direction="270" 
                          ShadowDepth="3" 
                          Opacity="0.3" 
                          BlurRadius="10"/>

        <!-- Button Style for Bottom Bar -->
        <Style x:Key="BottomBarButtonStyle" TargetType="{x:Type Button}">
            <Setter Property="Background" Value="{DynamicResource PrimaryColor}"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="12,6"/>
            <Setter Property="FontSize" Value="11"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="MinWidth" Value="60"/>
            <Setter Property="Height" Value="26"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type Button}">
                        <Border Background="{TemplateBinding Background}" 
                                CornerRadius="4" 
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" 
                                            VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#1E40AF"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Background" Value="#1D4ED8"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Use default/global ComboBox style to match Operation Log -->

        <!-- Default Button Style -->
        <Style x:Key="DefaultButtonStyle" TargetType="{x:Type Button}" BasedOn="{StaticResource BottomBarButtonStyle}">
            <Setter Property="Background" Value="{DynamicResource TextSecondaryColor}"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#6B7280"/>
                </Trigger>
                <Trigger Property="IsPressed" Value="True">
                    <Setter Property="Background" Value="#4B5563"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- Cancel Button Style -->
        <Style x:Key="CancelButtonStyle" TargetType="{x:Type Button}" BasedOn="{StaticResource BottomBarButtonStyle}">
            <Setter Property="Background" Value="{DynamicResource TextSecondaryColor}"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#6B7280"/>
                </Trigger>
                <Trigger Property="IsPressed" Value="True">
                    <Setter Property="Background" Value="#4B5563"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- Apply Button Style -->
        <Style x:Key="ApplyButtonStyle" TargetType="{x:Type Button}" BasedOn="{StaticResource BottomBarButtonStyle}">
            <Setter Property="Background" Value="{DynamicResource SuccessColor}"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#059669"/>
                </Trigger>
                <Trigger Property="IsPressed" Value="True">
                    <Setter Property="Background" Value="#047857"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- Sidebar Button Style -->
        <Style x:Key="SidebarButtonStyle" TargetType="{x:Type Button}">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="{DynamicResource TextSecondaryColor}"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="12,10"/>
            <Setter Property="Margin" Value="0,0"/>
            <Setter Property="HorizontalAlignment" Value="Stretch"/>
            <Setter Property="HorizontalContentAlignment" Value="Left"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type Button}">
                        <Border x:Name="ButtonBorder" 
                                Background="{TemplateBinding Background}" 
                                CornerRadius="0" 
                                Padding="{TemplateBinding Padding}"
                                Margin="{TemplateBinding Margin}"
                                BorderThickness="0">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                
                                <!-- Content -->
                                <ContentPresenter Grid.Column="0"
                                                HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" 
                                                VerticalAlignment="Center"/>
                                
                                <!-- Chevron Icon -->
                                <TextBlock Grid.Column="1"
                                           Text="â–¶" 
                                           FontSize="10" 
                                           Foreground="{TemplateBinding Foreground}"
                                           VerticalAlignment="Center"
                                           Margin="8,0,0,0"/>
                            </Grid>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="{DynamicResource MenuHoverColor}"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Background" Value="{DynamicResource MenuHoverColor}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Dropdown Sidebar Button Style -->
        <Style x:Key="DropdownSidebarButtonStyle" TargetType="{x:Type Button}">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="{DynamicResource TextSecondaryColor}"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="12,10"/>
            <Setter Property="Margin" Value="0,0"/>
            <Setter Property="HorizontalAlignment" Value="Stretch"/>
            <Setter Property="HorizontalContentAlignment" Value="Left"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type Button}">
                        <Border x:Name="ButtonBorder" 
                                Background="{TemplateBinding Background}" 
                                CornerRadius="0" 
                                Padding="{TemplateBinding Padding}"
                                Margin="{TemplateBinding Margin}"
                                BorderThickness="0">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                
                                <!-- Content -->
                                <ContentPresenter Grid.Column="0"
                                                HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" 
                                                VerticalAlignment="Center"/>
                                
                                <!-- Dropdown Chevron Icon -->
                                <TextBlock x:Name="ChevronIcon" Grid.Column="1"
                                           Text="â–¼" 
                                           FontSize="10" 
                                           Foreground="{TemplateBinding Foreground}"
                                           VerticalAlignment="Center"
                                           Margin="8,0,0,0"/>
                            </Grid>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="{DynamicResource MenuHoverColor}"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Background" Value="{DynamicResource MenuHoverColor}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Sub-option Button Style -->
        <Style x:Key="SubOptionButtonStyle" TargetType="{x:Type Button}">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="{DynamicResource TextSecondaryColor}"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="24,8"/>
            <Setter Property="Margin" Value="0,0"/>
            <Setter Property="HorizontalAlignment" Value="Stretch"/>
            <Setter Property="HorizontalContentAlignment" Value="Left"/>
            <Setter Property="FontSize" Value="11"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type Button}">
                        <Border x:Name="ButtonBorder" 
                                Background="{TemplateBinding Background}" 
                                CornerRadius="0" 
                                Padding="{TemplateBinding Padding}"
                                Margin="{TemplateBinding Margin}"
                                BorderThickness="0">
                            <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" 
                                            VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="{DynamicResource MenuHoverColor}"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Background" Value="{DynamicResource MenuHoverColor}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Active Sidebar Button Style -->
        <Style x:Key="ActiveSidebarButtonStyle" TargetType="{x:Type Button}" BasedOn="{StaticResource SidebarButtonStyle}">
            <Setter Property="Background" Value="{DynamicResource MenuHoverColor}"/>
            <Setter Property="Foreground" Value="{DynamicResource PrimaryColor}"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type Button}">
                        <Border x:Name="ButtonBorder" 
                                Background="{TemplateBinding Background}" 
                                CornerRadius="0" 
                                Padding="{TemplateBinding Padding}"
                                Margin="{TemplateBinding Margin}"
                                BorderThickness="3,0,0,0"
                                BorderBrush="{DynamicResource PrimaryColor}">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                
                                <!-- Content -->
                                <ContentPresenter Grid.Column="0"
                                                HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" 
                                                VerticalAlignment="Center"/>
                                
                                <!-- Chevron Icon -->
                                <TextBlock Grid.Column="1"
                                           Text="â–¶" 
                                           FontSize="10" 
                                           Foreground="{TemplateBinding Foreground}"
                                           VerticalAlignment="Center"
                                           Margin="8,0,0,0"/>
                            </Grid>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="{DynamicResource MenuHoverColor}"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Background" Value="{DynamicResource MenuHoverColor}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <DockPanel LastChildFill="True">
        <!-- Native TopBar with Dark Mode Toggle -->
        <Border DockPanel.Dock="Top" 
                Height="35"
                Style="{StaticResource NativeTopBarStyle}">
            <Grid>
                <StackPanel Orientation="Horizontal" 
                           HorizontalAlignment="Left" 
                           VerticalAlignment="Center"
                           Margin="15,0">
                    <!-- Warning/Alert Icon -->
                    <TextBlock Text="âš ï¸" 
                               FontSize="18" 
                               Foreground="{DynamicResource TextPrimaryColor}"
                               Margin="0,0,12,0"/>

                    <!-- Notification/Bell Icon -->
                    <TextBlock Text="ðŸ””" 
                               FontSize="18" 
                               Foreground="{DynamicResource TextPrimaryColor}"
                               Margin="0,0,12,0"/>

                    <!-- Download/Arrow Icon -->
                    <TextBlock Text="â¬‡ï¸" 
                               FontSize="18" 
                               Foreground="{DynamicResource TextPrimaryColor}"
                               Margin="0,0,12,0"/>

                    <!-- Clipboard/List Icon -->
                    <TextBlock Text="ðŸ“‹" 
                               FontSize="18" 
                               Foreground="{DynamicResource TextPrimaryColor}"
                               Margin="0,0,0,0"/>
                </StackPanel>
                <StackPanel Orientation="Horizontal" 
                           HorizontalAlignment="Right" 
                           VerticalAlignment="Center" 
                           Margin="15,0">
                    <!-- Lock Icon -->
                    <Button x:Name="LockButton"
                            Width="24" Height="24"
                            Background="Transparent"
                            BorderThickness="0"
                            Click="LockButton_Click"
                            ToolTip="Lock/Unlock"
                            Margin="0,0,8,0">
                        <TextBlock Text="ðŸ”’" 
                                   FontSize="16" 
                                   Foreground="{DynamicResource TextPrimaryColor}"/>
                    </Button>

                    <!-- Menu Icon -->
                    <Button x:Name="MainMenuButton"
                            Width="24" Height="24"
                            Background="Transparent"
                            BorderThickness="0"
                            Click="MainMenuButton_Click"
                            ToolTip="Menu"
                            Margin="0,0,8,0">
                        <TextBlock Text="â˜°" 
                                   FontSize="16" 
                                   Foreground="{DynamicResource TextPrimaryColor}"/>
                    </Button>

                    <!-- Theme Toggle Button -->
                    <Button x:Name="ThemeButton"
                            Width="24" Height="24"
                            Background="Transparent"
                            BorderThickness="0"
                            Click="ThemeButton_Click"
                            ToolTip="Select Theme">
                        <TextBlock Text="ðŸŒ™" 
                                   FontSize="16" 
                                   Foreground="{DynamicResource TextPrimaryColor}"/>
                    </Button>

                    <!-- Theme Options Popup -->
                    <Popup x:Name="ThemePopup"
                           PlacementTarget="{Binding ElementName=ThemeButton}"
                           Placement="Bottom"
                           IsOpen="False"
                           AllowsTransparency="True"
                           PopupAnimation="Slide">
                        <Border Background="{DynamicResource SurfaceColor}"
                                BorderBrush="{DynamicResource BorderColor}"
                                BorderThickness="1"
                                CornerRadius="4"
                                Padding="8"
                                Effect="{DynamicResource CardShadow}">
                            <StackPanel Orientation="Vertical" MinWidth="100">
                                <Button Content="â˜€ï¸ Light Mode" 
                                        Style="{StaticResource PopupButtonStyle}"
                                        Click="LightMode_Click"
                                        Margin="0,2"/>
                                <Button Content="ðŸŒ™ Dark Mode" 
                                        Style="{StaticResource PopupButtonStyle}"
                                        Click="DarkMode_Click"
                                        Margin="0,2"/>
                            </StackPanel>
                        </Border>
                    </Popup>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Separator Line -->
        <Border Height="1" 
                Background="{DynamicResource BorderColor}" 
                Margin="0,0,0,0"
                Opacity="0.6"/>

        <!-- Main Content Grid -->
        <Grid Margin="0,12,0,12" Background="{DynamicResource BackgroundColor}">
            <Grid.RowDefinitions>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Main Content Area -->
            <Grid Grid.Row="0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="220"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

            <!-- Left Sidebar -->
            <Border Grid.Column="0" 
                    Background="{DynamicResource SidebarColor}" 
                    BorderBrush="{DynamicResource BorderColor}"
                    BorderThickness="0,0,1,0">
                <ScrollViewer VerticalScrollBarVisibility="Auto" 
                              HorizontalScrollBarVisibility="Disabled">
                    <StackPanel Margin="0" Background="Transparent">
                        <!-- Sidebar Content -->
                        <TextBlock Text="System Configuration" 
                                   Foreground="{DynamicResource TextPrimaryColor}" 
                                   FontSize="12" 
                                   FontWeight="SemiBold"
                                   Margin="12,16,12,8"/>
                        
                        <!-- Configuration Options -->
                        <Button x:Name="AudioVideoButton"
                                Content="Audio &amp; Video" 
                                Style="{StaticResource DropdownSidebarButtonStyle}"
                                Click="AudioVideo_Click"
                                Tag="AudioVideo"/>
                        
                        <!-- Audio & Video Sub-options -->
                        <StackPanel x:Name="AudioVideoSubOptions" 
                                    Visibility="Visible">
                            <Button Content="Video" 
                                    Style="{StaticResource SubOptionButtonStyle}"
                                    Click="Video_Click"
                                    Tag="Video"/>
                            <Button Content="Snapshot" 
                                    Style="{StaticResource SubOptionButtonStyle}"
                                    Click="Snapshot_Click"
                                    Tag="Snapshot"/>
                            <Button Content="Recording" 
                                    Style="{StaticResource SubOptionButtonStyle}"
                                    Click="Recording_Click"
                                    Tag="Recording"/>
                            <Button Content="POS OSD Configuration" 
                                    Style="{StaticResource SubOptionButtonStyle}"
                                    Click="PosOsdConfig_Click"
                                    Tag="PosOsdConfig"/>
                        </StackPanel>
                        
                        <Button x:Name="SystemButton"
                                Content="System" 
                                Style="{StaticResource DropdownSidebarButtonStyle}"
                                Click="System_Click"
                                Tag="System"/>
                        
                        <!-- System Sub-options -->
                        <StackPanel x:Name="SystemSubOptions" 
                                    Visibility="Collapsed">
                            <Button Content="Startup" 
                                    Style="{StaticResource SubOptionButtonStyle}"
                                    Click="Startup_Click"
                                    Tag="Startup"/>
                            <Button Content="Log" 
                                    Style="{StaticResource SubOptionButtonStyle}"
                                    Click="Log_Click"
                                    Tag="Log"/>
                            <Button Content="Maintenance" 
                                    Style="{StaticResource SubOptionButtonStyle}"
                                    Click="Maintenance_Click"
                                    Tag="Maintenance"/>
                        </StackPanel>
                        
                        <Button x:Name="OperationButton"
                                Content="Operation" 
                                Style="{StaticResource DropdownSidebarButtonStyle}"
                                Click="Operation_Click"
                                Tag="Operation"/>
                        
                        <!-- Operation Sub-options -->
                        <StackPanel x:Name="OperationSubOptions" 
                                    Visibility="Collapsed">
                            <Button Content="Alarm" 
                                    Style="{StaticResource SubOptionButtonStyle}"
                                    Click="Alarm_Click"
                                    Tag="Alarm"/>
                            <Button Content="Service" 
                                    Style="{StaticResource SubOptionButtonStyle}"
                                    Click="Service_Click"
                                    Tag="Service"/>
                            <Button Content="Email" 
                                    Style="{StaticResource SubOptionButtonStyle}"
                                    Click="Email_Click"
                                    Tag="Email"/>
                            <Button Content="Epidemic Control" 
                                    Style="{StaticResource SubOptionButtonStyle}"
                                    Click="EpidemicControl_Click"
                                    Tag="EpidemicControl"/>
                            <Button Content="Attribute Display" 
                                    Style="{StaticResource SubOptionButtonStyle}"
                                    Click="AttributeDisplay_Click"
                                    Tag="AttributeDisplay"/>
                        </StackPanel>
                    </StackPanel>
                </ScrollViewer>
            </Border>

            <!-- Right Content Area -->
            <Border Grid.Column="1" 
                    Background="{DynamicResource BackgroundColor}">
                <Grid x:Name="RightContentRoot" Margin="8">
                    <!-- Default Placeholder -->
                    <TextBlock x:Name="DefaultPlaceholder" Text="System Configuration Settings" 
                               Foreground="{DynamicResource TextPrimaryColor}" 
                               FontSize="16" 
                               FontWeight="SemiBold"
                               HorizontalAlignment="Center" 
                               VerticalAlignment="Center"/>

                    <!-- Snapshot Panel -->
                    <Grid x:Name="SnapshotPanel" Visibility="Collapsed">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="10"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="10"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="10"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="10"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>

                        <!-- Snapshot Mode -->
                        <TextBlock Grid.Row="0" Grid.Column="0" Text="Snapshot Mode" Foreground="{DynamicResource TextPrimaryColor}" FontSize="12" VerticalAlignment="Center" Margin="0"/>
                        <StackPanel Grid.Row="0" Grid.Column="1" Orientation="Horizontal" Margin="8,0,0,8" HorizontalAlignment="Left">
                            <RadioButton x:Name="SnapshotModeAutoRadio" Content="Auto" GroupName="SnapshotMode" IsChecked="True" Foreground="{DynamicResource TextPrimaryColor}"/>
                            <RadioButton x:Name="SnapshotModeManualRadio" Content="Manual" GroupName="SnapshotMode" Margin="18,0,0,0" Foreground="{DynamicResource TextPrimaryColor}"/>
                        </StackPanel>

                        <!-- Continuous Snapshot Interval -->
                        <TextBlock Grid.Row="2" Grid.Column="0" Text="Continuous Snapshot Interval" Foreground="{DynamicResource TextPrimaryColor}" FontSize="12" VerticalAlignment="Center" Margin="0"/>
                        <ComboBox Grid.Row="2" Grid.Column="1" x:Name="SnapshotIntervalCombo" Width="180" Height="24" SelectedIndex="0" Margin="8,0,0,0" HorizontalAlignment="Left" HorizontalContentAlignment="Stretch">
                            <ComboBox.ItemContainerStyle>
                                <Style TargetType="{x:Type ComboBoxItem}">
                                    <Setter Property="Width" Value="{Binding ActualWidth, RelativeSource={RelativeSource AncestorType=ComboBox}}"/>
                                </Style>
                            </ComboBox.ItemContainerStyle>
                            <ComboBoxItem Content="1 second"/>
                            <ComboBoxItem Content="2 seconds"/>
                            <ComboBoxItem Content="3 seconds"/>
                            <ComboBoxItem Content="5 seconds"/>
                            <ComboBoxItem Content="10 seconds"/>
                        </ComboBox>

                        <!-- Continuous Snapshots -->
                        <TextBlock Grid.Row="4" Grid.Column="0" Text="Continuous Snapshots" Foreground="{DynamicResource TextPrimaryColor}" FontSize="12" VerticalAlignment="Center" Margin="0"/>
                        <ComboBox Grid.Row="4" Grid.Column="1" x:Name="ContinuousSnapshotsCombo" Width="180" Height="24" SelectedIndex="2" Margin="8,0,0,0" HorizontalAlignment="Left" HorizontalContentAlignment="Stretch">
                            <ComboBox.ItemContainerStyle>
                                <Style TargetType="{x:Type ComboBoxItem}">
                                    <Setter Property="Width" Value="{Binding ActualWidth, RelativeSource={RelativeSource AncestorType=ComboBox}}"/>
                                </Style>
                            </ComboBox.ItemContainerStyle>
                            <ComboBoxItem Content="1 pcs"/>
                            <ComboBoxItem Content="2 pcs"/>
                            <ComboBoxItem Content="3 pcs"/>
                            <ComboBoxItem Content="5 pcs"/>
                            <ComboBoxItem Content="10 pcs"/>
                        </ComboBox>

                        <!-- Snapshot Format -->
                        <TextBlock Grid.Row="6" Grid.Column="0" Text="Snapshot Format" Foreground="{DynamicResource TextPrimaryColor}" FontSize="12" VerticalAlignment="Center" Margin="0"/>
                        <StackPanel Grid.Row="6" Grid.Column="1" Orientation="Horizontal" Margin="8,0,0,0" HorizontalAlignment="Left">
                            <RadioButton x:Name="SnapshotFormatJpegRadio" Content="JPEG" GroupName="SnapshotFormat" IsChecked="True" Foreground="{DynamicResource TextPrimaryColor}"/>
                            <RadioButton x:Name="SnapshotFormatBmpRadio" Content="BMP" GroupName="SnapshotFormat" Margin="18,0,0,0" Foreground="{DynamicResource TextPrimaryColor}"/>
                        </StackPanel>

                        <!-- Image Save Path -->
                        <TextBlock Grid.Row="8" Grid.Column="0" Text="Image Save Path" Foreground="{DynamicResource TextPrimaryColor}" FontSize="12" VerticalAlignment="Center" Margin="0"/>
                        <Grid Grid.Row="8" Grid.Column="1" Margin="8,0,0,0" HorizontalAlignment="Left">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <TextBox x:Name="ImageSavePathTextBox" Grid.Column="0" MinWidth="280" Text="C:\\Users\\Public\\Guard Station 3\\Snap\\" Margin="0" Foreground="{DynamicResource TextPrimaryColor}"/>
                            <Button Grid.Column="1" Content="Browse..." Margin="8,0,0,0" Style="{StaticResource BottomBarButtonStyle}" Click="BrowseSnapshotPath_Click"/>
                        </Grid>
                    </Grid>

                    <!-- POS OSD Configuration Panel -->
                    <Grid x:Name="PosOsdConfigPanel" Visibility="Collapsed">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="10"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="10"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="10"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="10"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>

                        <!-- Display Area -->
                        <TextBlock Grid.Row="0" Grid.Column="0" Text="Display Area" Foreground="{DynamicResource TextPrimaryColor}" FontSize="12" VerticalAlignment="Center"/>
                        <ComboBox Grid.Row="0" Grid.Column="1" Width="180" Height="24" Margin="8,0,0,0" SelectedIndex="0" HorizontalContentAlignment="Stretch">
                            <ComboBox.ItemContainerStyle>
                                <Style TargetType="{x:Type ComboBoxItem}">
                                    <Setter Property="Width" Value="{Binding ActualWidth, RelativeSource={RelativeSource AncestorType=ComboBox}}"/>
                                </Style>
                            </ComboBox.ItemContainerStyle>
                            <ComboBoxItem Content="Left"/>
                            <ComboBoxItem Content="Right"/>
                            <ComboBoxItem Content="Top"/>
                            <ComboBoxItem Content="Bottom"/>
                        </ComboBox>

                        <!-- Font Size -->
                        <TextBlock Grid.Row="2" Grid.Column="0" Text="Font Size" Foreground="{DynamicResource TextPrimaryColor}" FontSize="12" VerticalAlignment="Center"/>
                        <ComboBox Grid.Row="2" Grid.Column="1" Width="180" Height="24" Margin="8,0,0,0" SelectedIndex="1" HorizontalContentAlignment="Stretch">
                            <ComboBox.ItemContainerStyle>
                                <Style TargetType="{x:Type ComboBoxItem}">
                                    <Setter Property="Width" Value="{Binding ActualWidth, RelativeSource={RelativeSource AncestorType=ComboBox}}"/>
                                </Style>
                            </ComboBox.ItemContainerStyle>
                            <ComboBoxItem Content="Small"/>
                            <ComboBoxItem Content="Middle"/>
                            <ComboBoxItem Content="Large"/>
                        </ComboBox>

                        <!-- Font Color -->
                        <TextBlock Grid.Row="4" Grid.Column="0" Text="Font Color" Foreground="{DynamicResource TextPrimaryColor}" FontSize="12" VerticalAlignment="Center"/>
                        <Grid Grid.Row="4" Grid.Column="1" Margin="6,0,0,0" HorizontalAlignment="Left">
                            <Border x:Name="FontColorSwatch" Width="66" Height="24" Background="Yellow" CornerRadius="3" MouseDown="FontColorSwatch_Click"/>
                            <Popup x:Name="FontColorPopup" Placement="Bottom" PlacementTarget="{Binding ElementName=FontColorSwatch}" StaysOpen="False">
                                <Border Background="{DynamicResource SurfaceColor}" BorderBrush="{DynamicResource BorderColor}" BorderThickness="1" CornerRadius="4" Padding="6">
                                    <UniformGrid Rows="2" Columns="6" Margin="2">
                                        <Border Width="22" Height="22" Background="#FFFFFF" Margin="2" Tag="#FFFFFF" MouseLeftButtonUp="FontColorOption_Click"/>
                                        <Border Width="22" Height="22" Background="#FFD700" Margin="2" Tag="#FFD700" MouseLeftButtonUp="FontColorOption_Click"/>
                                        <Border Width="22" Height="22" Background="#FF0000" Margin="2" Tag="#FF0000" MouseLeftButtonUp="FontColorOption_Click"/>
                                        <Border Width="22" Height="22" Background="#00FF00" Margin="2" Tag="#00FF00" MouseLeftButtonUp="FontColorOption_Click"/>
                                        <Border Width="22" Height="22" Background="#00BFFF" Margin="2" Tag="#00BFFF" MouseLeftButtonUp="FontColorOption_Click"/>
                                        <Border Width="22" Height="22" Background="#FFA500" Margin="2" Tag="#FFA500" MouseLeftButtonUp="FontColorOption_Click"/>
                                        <Border Width="22" Height="22" Background="#808080" Margin="2" Tag="#808080" MouseLeftButtonUp="FontColorOption_Click"/>
                                        <Border Width="22" Height="22" Background="#C0C0C0" Margin="2" Tag="#C0C0C0" MouseLeftButtonUp="FontColorOption_Click"/>
                                        <Border Width="22" Height="22" Background="#8A2BE2" Margin="2" Tag="#8A2BE2" MouseLeftButtonUp="FontColorOption_Click"/>
                                        <Border Width="22" Height="22" Background="#FF69B4" Margin="2" Tag="#FF69B4" MouseLeftButtonUp="FontColorOption_Click"/>
                                        <Border Width="22" Height="22" Background="#00CED1" Margin="2" Tag="#00CED1" MouseLeftButtonUp="FontColorOption_Click"/>
                                        <Border Width="22" Height="22" Background="#FFFF00" Margin="2" Tag="#FFFF00" MouseLeftButtonUp="FontColorOption_Click"/>
                                    </UniformGrid>
                                </Border>
                            </Popup>
                        </Grid>

                        <!-- Duration -->
                        <TextBlock Grid.Row="6" Grid.Column="0" Text="Duration" Foreground="{DynamicResource TextPrimaryColor}" FontSize="12" VerticalAlignment="Center"/>
                        <StackPanel Grid.Row="6" Grid.Column="1" Orientation="Horizontal" Margin="8,0,0,0" HorizontalAlignment="Left">
                            <RadioButton x:Name="DurationAutoRadio" Content="Auto" GroupName="DurationMode" IsChecked="True" Foreground="{DynamicResource TextPrimaryColor}" Checked="DurationMode_Changed"/>
                            <RadioButton x:Name="DurationCustomRadio" Content="Custom" GroupName="DurationMode" Margin="16,0,0,0" Foreground="{DynamicResource TextPrimaryColor}" Checked="DurationMode_Changed"/>
                            <TextBox x:Name="DurationSecondsTextBox" Width="80" Height="24" Margin="16,0,0,0" IsEnabled="False" Text="5"/>
                            <TextBlock Margin="8,0,0,0" VerticalAlignment="Center" Foreground="{DynamicResource TextPrimaryColor}" Text="Second"/>
                        </StackPanel>

                        <!-- POS Function -->
                        <TextBlock Grid.Row="8" Grid.Column="0" Text="POS Function" Foreground="{DynamicResource TextPrimaryColor}" FontSize="12" VerticalAlignment="Center"/>
                        <StackPanel Grid.Row="8" Grid.Column="1" Orientation="Horizontal" Margin="8,0,0,0" HorizontalAlignment="Left">
                            <RadioButton x:Name="PosFunctionOnRadio" Content="On" GroupName="PosFunction" Foreground="{DynamicResource TextPrimaryColor}"/>
                            <RadioButton x:Name="PosFunctionOffRadio" Content="Off" GroupName="PosFunction" Margin="24,0,0,0" IsChecked="True" Foreground="{DynamicResource TextPrimaryColor}"/>
                        </StackPanel>
                    </Grid>

                    <!-- Video Panel -->
                    <Grid x:Name="VideoPanel" Visibility="Collapsed">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/> <!-- Play Mode -->
                            <RowDefinition Height="10"/>
                            <RowDefinition Height="Auto"/> <!-- Stream Type (two rows) -->
                            <RowDefinition Height="6"/>
                            <RowDefinition Height="Auto"/> <!-- Stream Type row 2 -->
                            <RowDefinition Height="10"/>
                            <RowDefinition Height="Auto"/> <!-- Playback Mode -->
                            <RowDefinition Height="10"/>
                            <RowDefinition Height="Auto"/> <!-- Protocol -->
                            <RowDefinition Height="10"/>
                            <RowDefinition Height="Auto"/> <!-- Display Ratio -->
                            <RowDefinition Height="10"/>
                            <RowDefinition Height="Auto"/> <!-- Instant Playback -->
                            <RowDefinition Height="10"/>
                            <RowDefinition Height="Auto"/> <!-- Options -->
                        </Grid.RowDefinitions>

                        <!-- Play Mode -->
                        <TextBlock Grid.Row="0" Grid.Column="0" Text="Play Mode" Foreground="{DynamicResource TextPrimaryColor}" FontSize="12" VerticalAlignment="Center"/>
                        <ComboBox Grid.Row="0" Grid.Column="1" Width="180" Height="24" Margin="8,0,0,0" SelectedIndex="0" HorizontalContentAlignment="Stretch">
                            <ComboBox.ItemContainerStyle>
                                <Style TargetType="{x:Type ComboBoxItem}">
                                    <Setter Property="Width" Value="{Binding ActualWidth, RelativeSource={RelativeSource AncestorType=ComboBox}}"/>
                                </Style>
                            </ComboBox.ItemContainerStyle>
                            <ComboBoxItem Content="Balanced"/>
                            <ComboBoxItem Content="Fluent"/>
                            <ComboBoxItem Content="Clear"/>
                        </ComboBox>

                        <!-- Stream Type -->
                        <TextBlock Grid.Row="2" Grid.Column="0" Grid.RowSpan="3" Text="Stream Type" Foreground="{DynamicResource TextPrimaryColor}" FontSize="12" VerticalAlignment="Top"/>
                        <Grid Grid.Row="2" Grid.Column="1" Margin="8,0,0,0" HorizontalAlignment="Left">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="6"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>
                            <!-- Row 1: Adapt option -->
                            <RadioButton Grid.Row="0" x:Name="StreamAdaptRadio" Content="Adapt to Screen Layout" GroupName="StreamType" IsChecked="True" Foreground="{DynamicResource TextPrimaryColor}"/>
                            <!-- Row 2: Default option with dropdown -->
                            <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Left">
                                <RadioButton x:Name="StreamDefaultRadio" Content="Use Default Stream Type" GroupName="StreamType" Foreground="{DynamicResource TextPrimaryColor}"/>
                                <ComboBox x:Name="StreamTypeCombo" Width="120" Height="24" Margin="8,0,0,0"
                                          IsEnabled="{Binding IsChecked, ElementName=StreamDefaultRadio}"
                                          SelectedIndex="0"
                                          Foreground="{DynamicResource TextPrimaryColor}" VerticalContentAlignment="Center" HorizontalContentAlignment="Stretch">
                                    <ComboBox.ItemContainerStyle>
                                        <Style TargetType="{x:Type ComboBoxItem}">
                                            <Setter Property="Width" Value="{Binding ActualWidth, RelativeSource={RelativeSource AncestorType=ComboBox}}"/>
                                            <Setter Property="Foreground" Value="{DynamicResource TextPrimaryColor}"/>
                                        </Style>
                                    </ComboBox.ItemContainerStyle>
                                    <ComboBoxItem Content="Main"/>
                                    <ComboBoxItem Content="Sub"/>
                                </ComboBox>
                            </StackPanel>
                        </Grid>

                        <!-- Playback Mode -->
                        <TextBlock Grid.Row="6" Grid.Column="0" Text="Playback Mode" Foreground="{DynamicResource TextPrimaryColor}" FontSize="12" VerticalAlignment="Center"/>
                        <ComboBox Grid.Row="6" Grid.Column="1" Width="180" Height="24" Margin="8,0,0,0" SelectedIndex="1" HorizontalContentAlignment="Stretch">
                            <ComboBox.ItemContainerStyle>
                                <Style TargetType="{x:Type ComboBoxItem}">
                                    <Setter Property="Width" Value="{Binding ActualWidth, RelativeSource={RelativeSource AncestorType=ComboBox}}"/>
                                </Style>
                            </ComboBox.ItemContainerStyle>
                            <ComboBoxItem Content="SD"/>
                            <ComboBoxItem Content="HD"/>
                            <ComboBoxItem Content="Ultra"/>
                        </ComboBox>

                        <!-- Stream Transmission Protocol -->
                        <TextBlock Grid.Row="8" Grid.Column="0" Text="Stream Transmission Protocol" Foreground="{DynamicResource TextPrimaryColor}" FontSize="12" VerticalAlignment="Center"/>
                        <ComboBox Grid.Row="8" Grid.Column="1" Width="180" Height="24" Margin="8,0,0,0" SelectedIndex="1" HorizontalContentAlignment="Stretch">
                            <ComboBox.ItemContainerStyle>
                                <Style TargetType="{x:Type ComboBoxItem}">
                                    <Setter Property="Width" Value="{Binding ActualWidth, RelativeSource={RelativeSource AncestorType=ComboBox}}"/>
                                </Style>
                            </ComboBox.ItemContainerStyle>
                            <ComboBoxItem Content="UDP"/>
                            <ComboBoxItem Content="TCP"/>
                        </ComboBox>

                        <!-- Display Ratio -->
                        <TextBlock Grid.Row="10" Grid.Column="0" Text="Display Ratio" Foreground="{DynamicResource TextPrimaryColor}" FontSize="12" VerticalAlignment="Center"/>
                        <ComboBox Grid.Row="10" Grid.Column="1" Width="180" Height="24" Margin="8,0,0,0" SelectedIndex="0" HorizontalContentAlignment="Stretch">
                            <ComboBox.ItemContainerStyle>
                                <Style TargetType="{x:Type ComboBoxItem}">
                                    <Setter Property="Width" Value="{Binding ActualWidth, RelativeSource={RelativeSource AncestorType=ComboBox}}"/>
                                </Style>
                            </ComboBox.ItemContainerStyle>
                            <ComboBoxItem Content="Full"/>
                            <ComboBoxItem Content="Fit"/>
                            <ComboBoxItem Content="Original"/>
                        </ComboBox>

                        <!-- Instant Playback Time (s) -->
                        <TextBlock Grid.Row="12" Grid.Column="0" Text="Instant Playback Time (s)" Foreground="{DynamicResource TextPrimaryColor}" FontSize="12" VerticalAlignment="Center"/>
                        <StackPanel Grid.Row="12" Grid.Column="1" Orientation="Horizontal" Margin="8,0,0,0">
                            <TextBox Width="180" Height="24" Text="330"/>
                            <TextBlock Margin="8,0,0,0" VerticalAlignment="Center" Foreground="{DynamicResource TextSecondaryColor}" Text="[10-330]"/>
                        </StackPanel>

                        <!-- Options -->
                        <StackPanel Grid.Row="14" Grid.ColumnSpan="2" Orientation="Vertical" Margin="0,0,0,0">
                            <CheckBox Content="Play Main Stream in Maximized Live View Window" Margin="0,0,0,0" Foreground="{DynamicResource TextPrimaryColor}"/>
                            <CheckBox Content="Enable Short PTZ Control" Margin="0,8,0,0" Foreground="{DynamicResource TextPrimaryColor}"/>
                            <CheckBox Content="Enable VCA Rule" Margin="0,8,0,0" Foreground="{DynamicResource TextPrimaryColor}"/>
                            <CheckBox Content="Enable Playback Preview" Margin="0,8,0,0" Foreground="{DynamicResource TextPrimaryColor}"/>
                            <CheckBox Content="Enable GPU Mode" Margin="0,8,0,0" Foreground="{DynamicResource TextPrimaryColor}"/>
                        </StackPanel>
                    </Grid>

                    <!-- Recording Panel -->
                    <ScrollViewer x:Name="RecordingPanel" Visibility="Collapsed" VerticalScrollBarVisibility="Auto">
                        <StackPanel>
                            <!-- Downloaded Recording Section -->
                            <Border Background="{DynamicResource SurfaceColor}" 
                                    BorderBrush="{DynamicResource BorderColor}" 
                                    BorderThickness="1" 
                                    CornerRadius="4" 
                                    Padding="16" 
                                    Margin="0,0,0,16">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="16"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="12"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>

                                    <!-- Section Header -->
                                    <TextBlock Grid.Row="0" Grid.ColumnSpan="2" 
                                               Text="Downloaded Recording" 
                                               Foreground="{DynamicResource TextSecondaryColor}" 
                                               FontSize="13" 
                                               FontWeight="SemiBold"
                                               Margin="0,0,0,0"/>

                                    <!-- Downloaded Recording Path -->
                                    <TextBlock Grid.Row="2" Grid.Column="0" 
                                               Text="Downloaded Recording Path" 
                                               Foreground="{DynamicResource TextPrimaryColor}" 
                                               FontSize="12" 
                                               VerticalAlignment="Center"
                                               Width="200"/>
                                    <Grid Grid.Row="2" Grid.Column="1" Margin="0,0,0,0">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBox x:Name="DownloadedRecordingPathTextBox" 
                                                 Grid.Column="0" 
                                                 Text="C:\Users\Public\Guard Station 3\Record\" 
                                                 Height="28"
                                                 VerticalContentAlignment="Center"
                                                 Foreground="{DynamicResource TextPrimaryColor}"/>
                                        <Button Grid.Column="1" 
                                                Content="Browse..." 
                                                Margin="8,0,0,0" 
                                                Style="{StaticResource BottomBarButtonStyle}" 
                                                Click="BrowseDownloadedRecordingPath_Click"/>
                                    </Grid>

                                    <!-- Downloaded Recording Format -->
                                    <TextBlock Grid.Row="4" Grid.Column="0" 
                                               Text="Downloaded Recording Format" 
                                               Foreground="{DynamicResource TextPrimaryColor}" 
                                               FontSize="12" 
                                               VerticalAlignment="Center"
                                               Width="200"/>
                                    <ComboBox Grid.Row="4" Grid.Column="1" 
                                              x:Name="DownloadedRecordingFormatCombo" 
                                              Width="180" 
                                              Height="28" 
                                              SelectedIndex="0" 
                                              HorizontalAlignment="Left"
                                              HorizontalContentAlignment="Stretch">
                                        <ComboBox.ItemContainerStyle>
                                            <Style TargetType="{x:Type ComboBoxItem}">
                                                <Setter Property="Width" Value="{Binding ActualWidth, RelativeSource={RelativeSource AncestorType=ComboBox}}"/>
                                            </Style>
                                        </ComboBox.ItemContainerStyle>
                                        <ComboBoxItem Content="mp4"/>
                                        <ComboBoxItem Content="avi"/>
                                        <ComboBoxItem Content="mkv"/>
                                    </ComboBox>
                                </Grid>
                            </Border>

                            <!-- Local Recording Section -->
                            <Border Background="{DynamicResource SurfaceColor}" 
                                    BorderBrush="{DynamicResource BorderColor}" 
                                    BorderThickness="1" 
                                    CornerRadius="4" 
                                    Padding="16">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="16"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="12"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="12"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="12"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="12"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>

                                    <!-- Section Header -->
                                    <TextBlock Grid.Row="0" Grid.ColumnSpan="2" 
                                               Text="Local Recording" 
                                               Foreground="{DynamicResource TextSecondaryColor}" 
                                               FontSize="13" 
                                               FontWeight="SemiBold"
                                               Margin="0,0,0,0"/>

                                    <!-- Local Recording Path -->
                                    <TextBlock Grid.Row="2" Grid.Column="0" 
                                               Text="Local Recording Path" 
                                               Foreground="{DynamicResource TextPrimaryColor}" 
                                               FontSize="12" 
                                               VerticalAlignment="Center"
                                               Width="200"/>
                                    <Grid Grid.Row="2" Grid.Column="1" Margin="0,0,0,0">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBox x:Name="LocalRecordingPathTextBox" 
                                                 Grid.Column="0" 
                                                 Text="D:\Record\" 
                                                 Height="28"
                                                 VerticalContentAlignment="Center"
                                                 Foreground="{DynamicResource TextPrimaryColor}"/>
                                        <Button Grid.Column="1" 
                                                Content="Browse..." 
                                                Margin="8,0,0,0" 
                                                Style="{StaticResource BottomBarButtonStyle}" 
                                                Click="BrowseLocalRecordingPath_Click"/>
                                    </Grid>

                                    <!-- Local Recording Format -->
                                    <TextBlock Grid.Row="4" Grid.Column="0" 
                                               Text="Local Recording Format" 
                                               Foreground="{DynamicResource TextPrimaryColor}" 
                                               FontSize="12" 
                                               VerticalAlignment="Center"
                                               Width="200"/>
                                    <ComboBox Grid.Row="4" Grid.Column="1" 
                                              x:Name="LocalRecordingFormatCombo" 
                                              Width="180" 
                                              Height="28" 
                                              SelectedIndex="0" 
                                              HorizontalAlignment="Left"
                                              HorizontalContentAlignment="Stretch">
                                        <ComboBox.ItemContainerStyle>
                                            <Style TargetType="{x:Type ComboBoxItem}">
                                                <Setter Property="Width" Value="{Binding ActualWidth, RelativeSource={RelativeSource AncestorType=ComboBox}}"/>
                                            </Style>
                                        </ComboBox.ItemContainerStyle>
                                        <ComboBoxItem Content="mp4"/>
                                        <ComboBoxItem Content="avi"/>
                                        <ComboBoxItem Content="mkv"/>
                                    </ComboBox>

                                    <!-- When HDD Full -->
                                    <TextBlock Grid.Row="6" Grid.Column="0" 
                                               Text="When HDD Full" 
                                               Foreground="{DynamicResource TextPrimaryColor}" 
                                               FontSize="12" 
                                               VerticalAlignment="Center"
                                               Width="200"/>
                                    <StackPanel Grid.Row="6" Grid.Column="1" 
                                                Orientation="Horizontal" 
                                                HorizontalAlignment="Left">
                                        <RadioButton x:Name="HddFullOverwriteRadio" 
                                                     Content="Overwrite" 
                                                     GroupName="HddFull" 
                                                     IsChecked="True" 
                                                     Foreground="{DynamicResource TextPrimaryColor}"/>
                                        <RadioButton x:Name="HddFullStopRadio" 
                                                     Content="Stop" 
                                                     GroupName="HddFull" 
                                                     Margin="24,0,0,0" 
                                                     Foreground="{DynamicResource TextPrimaryColor}"/>
                                    </StackPanel>

                                    <!-- Recording Space -->
                                    <TextBlock Grid.Row="8" Grid.Column="0" 
                                               Text="Recording Space" 
                                               Foreground="{DynamicResource TextPrimaryColor}" 
                                               FontSize="12" 
                                               VerticalAlignment="Center"
                                               Width="200"/>
                                    <StackPanel Grid.Row="8" Grid.Column="1" 
                                                Orientation="Horizontal" 
                                                HorizontalAlignment="Left">
                                        <TextBox x:Name="RecordingSpaceTextBox" 
                                                 Width="180" 
                                                 Height="28" 
                                                 Text="686"
                                                 VerticalContentAlignment="Center"
                                                 Foreground="{DynamicResource TextPrimaryColor}"/>
                                        <TextBlock Margin="8,0,0,0" 
                                                   VerticalAlignment="Center" 
                                                   Foreground="{DynamicResource TextSecondaryColor}" 
                                                   Text="GB [Total: 931 G, Free: 921 G]"/>
                                    </StackPanel>

                                    <!-- Recording File Size -->
                                    <TextBlock Grid.Row="10" Grid.Column="0" 
                                               Text="Recording File Size" 
                                               Foreground="{DynamicResource TextPrimaryColor}" 
                                               FontSize="12" 
                                               VerticalAlignment="Center"
                                               Width="200"/>
                                    <StackPanel Grid.Row="10" Grid.Column="1" 
                                                Orientation="Horizontal" 
                                                HorizontalAlignment="Left">
                                        <TextBox x:Name="RecordingFileSizeTextBox" 
                                                 Width="180" 
                                                 Height="28" 
                                                 Text="200"
                                                 VerticalContentAlignment="Center"
                                                 Foreground="{DynamicResource TextPrimaryColor}"/>
                                        <TextBlock Margin="8,0,0,0" 
                                                   VerticalAlignment="Center" 
                                                   Foreground="{DynamicResource TextSecondaryColor}" 
                                                   Text="MB [100-4000]"/>
                                    </StackPanel>
                                </Grid>
                            </Border>
                        </StackPanel>
                    </ScrollViewer>

                    <!-- Startup Panel -->
                    <Grid x:Name="StartupPanel" Visibility="Collapsed">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="12"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="20"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="12"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>

                        <!-- Enable Auto Login for VMS -->
                        <CheckBox Grid.Row="0" Grid.ColumnSpan="2" 
                                  x:Name="EnableAutoLoginVmsCheckBox"
                                  Content="Enable Auto Login for VMS" 
                                  Foreground="{DynamicResource TextPrimaryColor}"
                                  FontSize="12"/>

                        <!-- Enable Auto Login for Windows -->
                        <CheckBox Grid.Row="2" Grid.ColumnSpan="2" 
                                  x:Name="EnableAutoLoginWindowsCheckBox"
                                  Content="Enable Auto Login for Windows" 
                                  Foreground="{DynamicResource TextPrimaryColor}"
                                  FontSize="12"/>

                        <!-- Username -->
                        <TextBlock Grid.Row="4" Grid.Column="0" 
                                   Text="Username" 
                                   Foreground="{DynamicResource TextPrimaryColor}" 
                                   FontSize="12" 
                                   VerticalAlignment="Center"
                                   Width="120"/>
                        <TextBox Grid.Row="4" Grid.Column="1" 
                                 x:Name="StartupUsernameTextBox"
                                 Width="220"
                                 Height="28"
                                 HorizontalAlignment="Left"
                                 VerticalContentAlignment="Center"
                                 Foreground="{DynamicResource TextPrimaryColor}"/>

                        <!-- Password -->
                        <TextBlock Grid.Row="6" Grid.Column="0" 
                                   Text="Password" 
                                   Foreground="{DynamicResource TextPrimaryColor}" 
                                   FontSize="12" 
                                   VerticalAlignment="Center"
                                   Width="120"/>
                        <PasswordBox Grid.Row="6" Grid.Column="1" 
                                     x:Name="StartupPasswordBox"
                                     Width="220"
                                     Height="28"
                                     HorizontalAlignment="Left"
                                     VerticalContentAlignment="Center"
                                     Background="{DynamicResource BackgroundColor}"
                                     BorderBrush="{DynamicResource BorderColor}"
                                     Foreground="{DynamicResource TextPrimaryColor}"/>
                    </Grid>

                    <!-- Log Panel -->
                    <Grid x:Name="LogPanel" Visibility="Collapsed">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="12"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>

                        <!-- Save Operation Log For -->
                        <TextBlock Grid.Row="0" Grid.Column="0" 
                                   Text="Save Operation Log For" 
                                   Foreground="{DynamicResource TextPrimaryColor}" 
                                   FontSize="12" 
                                   VerticalAlignment="Center"
                                   Width="180"/>
                        <ComboBox Grid.Row="0" Grid.Column="1" 
                                  x:Name="SaveOperationLogCombo" 
                                  Width="220" 
                                  Height="28" 
                                  SelectedIndex="1" 
                                  HorizontalAlignment="Left"
                                  HorizontalContentAlignment="Stretch">
                            <ComboBox.ItemContainerStyle>
                                <Style TargetType="{x:Type ComboBoxItem}">
                                    <Setter Property="Width" Value="{Binding ActualWidth, RelativeSource={RelativeSource AncestorType=ComboBox}}"/>
                                </Style>
                            </ComboBox.ItemContainerStyle>
                            <ComboBoxItem Content="5 Days"/>
                            <ComboBoxItem Content="10 Days"/>
                            <ComboBoxItem Content="15 Days"/>
                            <ComboBoxItem Content="30 Days"/>
                            <ComboBoxItem Content="60 Days"/>
                            <ComboBoxItem Content="90 Days"/>
                        </ComboBox>

                        <!-- Save Alarm Log For -->
                        <TextBlock Grid.Row="2" Grid.Column="0" 
                                   Text="Save Alarm Log For" 
                                   Foreground="{DynamicResource TextPrimaryColor}" 
                                   FontSize="12" 
                                   VerticalAlignment="Center"
                                   Width="180"/>
                        <ComboBox Grid.Row="2" Grid.Column="1" 
                                  x:Name="SaveAlarmLogCombo" 
                                  Width="220" 
                                  Height="28" 
                                  SelectedIndex="1" 
                                  HorizontalAlignment="Left"
                                  HorizontalContentAlignment="Stretch">
                            <ComboBox.ItemContainerStyle>
                                <Style TargetType="{x:Type ComboBoxItem}">
                                    <Setter Property="Width" Value="{Binding ActualWidth, RelativeSource={RelativeSource AncestorType=ComboBox}}"/>
                                </Style>
                            </ComboBox.ItemContainerStyle>
                            <ComboBoxItem Content="5 Days"/>
                            <ComboBoxItem Content="10 Days"/>
                            <ComboBoxItem Content="15 Days"/>
                            <ComboBoxItem Content="30 Days"/>
                            <ComboBoxItem Content="60 Days"/>
                            <ComboBoxItem Content="90 Days"/>
                        </ComboBox>
                    </Grid>

                    <!-- Maintenance Panel -->
                    <Grid x:Name="MaintenancePanel" Visibility="Collapsed">
                        <StackPanel Orientation="Vertical" HorizontalAlignment="Center" VerticalAlignment="Center">
                            <!-- Import Configurations Button -->
                            <Button x:Name="ImportConfigButton"
                                    Content="Import Configurations" 
                                    Width="220"
                                    Height="32"
                                    Margin="0,0,0,12"
                                    Style="{StaticResource BottomBarButtonStyle}"
                                    Click="ImportConfig_Click"
                                    HorizontalContentAlignment="Center"/>

                            <!-- Export Configurations Button -->
                            <Button x:Name="ExportConfigButton"
                                    Content="Export Configurations" 
                                    Width="220"
                                    Height="32"
                                    Margin="0,0,0,12"
                                    Style="{StaticResource BottomBarButtonStyle}"
                                    Click="ExportConfig_Click"
                                    HorizontalContentAlignment="Center"/>

                            <!-- Export Maintenance Info Button -->
                            <Button x:Name="ExportMaintenanceInfoButton"
                                    Content="Export Maintenance Info" 
                                    Width="220"
                                    Height="32"
                                    Margin="0,0,0,0"
                                    Style="{StaticResource BottomBarButtonStyle}"
                                    Click="ExportMaintenanceInfo_Click"
                                    HorizontalContentAlignment="Center"/>
                        </StackPanel>
                    </Grid>

                    <!-- Service Panel -->
                    <Grid x:Name="ServicePanel" Visibility="Collapsed">
                        <Border Background="{DynamicResource SurfaceColor}" 
                                BorderBrush="{DynamicResource BorderColor}" 
                                BorderThickness="1" 
                                CornerRadius="6" 
                                Padding="20"
                                MaxWidth="500"
                                HorizontalAlignment="Left"
                                VerticalAlignment="Top">
                            <StackPanel>
                                <!-- Section Header -->
                                <TextBlock Text="Time Synchronization" 
                                           Foreground="{DynamicResource PrimaryColor}" 
                                           FontSize="14" 
                                           FontWeight="SemiBold"
                                           Margin="0,0,0,16"/>

                                <!-- Enable Auto Time Sync Checkbox -->
                                <Border Background="{DynamicResource BackgroundColor}"
                                        BorderBrush="{DynamicResource BorderColor}"
                                        BorderThickness="1"
                                        CornerRadius="4"
                                        Padding="14,10"
                                        Margin="0,0,0,12">
                                    <CheckBox x:Name="EnableAutoTimeSyncCheckBox"
                                              Content="Enable Auto Time Sync" 
                                              Foreground="{DynamicResource TextPrimaryColor}"
                                              FontSize="13"
                                              FontWeight="Medium"
                                              Checked="EnableAutoTimeSync_Changed"
                                              Unchecked="EnableAutoTimeSync_Changed"/>
                                </Border>

                                <!-- Interval Section -->
                                <Border x:Name="IntervalBorder"
                                        Background="{DynamicResource BackgroundColor}"
                                        BorderBrush="{DynamicResource BorderColor}"
                                        BorderThickness="1"
                                        CornerRadius="4"
                                        Padding="14">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="8"/>
                                            <RowDefinition Height="Auto"/>
                                        </Grid.RowDefinitions>

                                        <!-- Interval Label -->
                                        <StackPanel Grid.Row="0" Grid.ColumnSpan="2" Orientation="Horizontal">
                                            <TextBlock Text="â±" 
                                                       FontSize="16" 
                                                       Margin="0,0,8,0"
                                                       VerticalAlignment="Center"/>
                                            <TextBlock Text="Synchronization Interval" 
                                                       Foreground="{DynamicResource TextPrimaryColor}" 
                                                       FontSize="12" 
                                                       FontWeight="SemiBold"
                                                       VerticalAlignment="Center"/>
                                        </StackPanel>

                                        <!-- Interval Dropdown -->
                                        <ComboBox Grid.Row="2" Grid.ColumnSpan="2"
                                                  x:Name="TimeSyncIntervalCombo" 
                                                  Height="32" 
                                                  SelectedIndex="2" 
                                                  HorizontalAlignment="Stretch"
                                                  HorizontalContentAlignment="Left"
                                                  IsEnabled="{Binding IsChecked, ElementName=EnableAutoTimeSyncCheckBox}"
                                                  FontSize="12">
                                            <ComboBox.ItemContainerStyle>
                                                <Style TargetType="{x:Type ComboBoxItem}">
                                                    <Setter Property="Padding" Value="10,8"/>
                                                </Style>
                                            </ComboBox.ItemContainerStyle>
                                            <ComboBoxItem Content="Every 1 Hour"/>
                                            <ComboBoxItem Content="Every 2 Hours"/>
                                            <ComboBoxItem Content="Every 4 Hours"/>
                                            <ComboBoxItem Content="Every 6 Hours"/>
                                            <ComboBoxItem Content="Every 8 Hours"/>
                                            <ComboBoxItem Content="Every 12 Hours"/>
                                            <ComboBoxItem Content="Every 24 Hours"/>
                                        </ComboBox>
                                    </Grid>
                                </Border>

                                <!-- Info Text -->
                                <TextBlock Text="ðŸ’¡ Automatically synchronize system time with the network time server at the specified interval." 
                                           Foreground="{DynamicResource TextSecondaryColor}" 
                                           FontSize="11" 
                                           TextWrapping="Wrap"
                                           Margin="0,12,0,0"
                                           LineHeight="16"/>
                            </StackPanel>
                        </Border>
                    </Grid>

                    <!-- Attribute Display Panel -->
                    <ScrollViewer x:Name="AttributeDisplayPanel" Visibility="Collapsed" VerticalScrollBarVisibility="Auto">
                        <StackPanel>
                            <!-- Match Face Info Display Section -->
                            <Border Background="{DynamicResource SurfaceColor}" 
                                    BorderBrush="{DynamicResource BorderColor}" 
                                    BorderThickness="1" 
                                    CornerRadius="6" 
                                    Padding="20"
                                    Margin="0,0,0,16">
                                <StackPanel>
                                    <TextBlock Text="Match Face Info Display" 
                                               Foreground="{DynamicResource TextPrimaryColor}" 
                                               FontSize="13" 
                                               FontWeight="SemiBold"
                                               Margin="0,0,0,12"/>
                                    
                                    <UniformGrid Columns="4" Rows="2">
                                        <CheckBox Content="Channel Name" 
                                                  IsChecked="True" 
                                                  Foreground="{DynamicResource TextPrimaryColor}"
                                                  Margin="0,0,12,8"/>
                                        <CheckBox Content="Name" 
                                                  IsChecked="True" 
                                                  Foreground="{DynamicResource TextPrimaryColor}"
                                                  Margin="0,0,12,8"/>
                                        <CheckBox Content="Time" 
                                                  IsChecked="True" 
                                                  Foreground="{DynamicResource TextPrimaryColor}"
                                                  Margin="0,0,12,8"/>
                                        <CheckBox Content="Library Name" 
                                                  IsChecked="True" 
                                                  Foreground="{DynamicResource TextPrimaryColor}"
                                                  Margin="0,0,12,8"/>
                                        <CheckBox Content="Match Degree" 
                                                  IsChecked="True" 
                                                  Foreground="{DynamicResource TextPrimaryColor}"
                                                  Margin="0,0,12,0"/>
                                        <CheckBox Content="Temperature" 
                                                  IsChecked="True" 
                                                  Foreground="{DynamicResource TextPrimaryColor}"
                                                  Margin="0,0,12,0"/>
                                        <CheckBox Content="Mask" 
                                                  IsChecked="True" 
                                                  Foreground="{DynamicResource TextPrimaryColor}"
                                                  Margin="0,0,12,0"/>
                                    </UniformGrid>
                                </StackPanel>
                            </Border>

                            <!-- Not Match Face Info Display Section -->
                            <Border Background="{DynamicResource SurfaceColor}" 
                                    BorderBrush="{DynamicResource BorderColor}" 
                                    BorderThickness="1" 
                                    CornerRadius="6" 
                                    Padding="20"
                                    Margin="0,0,0,16">
                                <StackPanel>
                                    <TextBlock Text="Not Match Face Info Display" 
                                               Foreground="{DynamicResource TextPrimaryColor}" 
                                               FontSize="13" 
                                               FontWeight="SemiBold"
                                               Margin="0,0,0,12"/>
                                    
                                    <UniformGrid Columns="4" Rows="1">
                                        <CheckBox Content="Channel Name" 
                                                  IsChecked="True" 
                                                  Foreground="{DynamicResource TextPrimaryColor}"
                                                  Margin="0,0,12,0"/>
                                        <CheckBox Content="Time" 
                                                  IsChecked="True" 
                                                  Foreground="{DynamicResource TextPrimaryColor}"
                                                  Margin="0,0,12,0"/>
                                        <CheckBox Content="Temperature" 
                                                  IsChecked="True" 
                                                  Foreground="{DynamicResource TextPrimaryColor}"
                                                  Margin="0,0,12,0"/>
                                        <CheckBox Content="Mask" 
                                                  IsChecked="True" 
                                                  Foreground="{DynamicResource TextPrimaryColor}"
                                                  Margin="0,0,12,0"/>
                                    </UniformGrid>
                                </StackPanel>
                            </Border>

                            <!-- Face Snapshot Info Display Section -->
                            <Border Background="{DynamicResource SurfaceColor}" 
                                    BorderBrush="{DynamicResource BorderColor}" 
                                    BorderThickness="1" 
                                    CornerRadius="6" 
                                    Padding="20">
                                <StackPanel>
                                    <TextBlock Text="Face Snapshot Info Display" 
                                               Foreground="{DynamicResource TextPrimaryColor}" 
                                               FontSize="13" 
                                               FontWeight="SemiBold"
                                               Margin="0,0,0,12"/>
                                    
                                    <UniformGrid Columns="4" Rows="1">
                                        <CheckBox Content="Channel Name" 
                                                  IsChecked="True" 
                                                  Foreground="{DynamicResource TextPrimaryColor}"
                                                  Margin="0,0,12,0"/>
                                        <CheckBox Content="Time" 
                                                  IsChecked="True" 
                                                  Foreground="{DynamicResource TextPrimaryColor}"
                                                  Margin="0,0,12,0"/>
                                        <CheckBox Content="Temperature" 
                                                  IsChecked="True" 
                                                  Foreground="{DynamicResource TextPrimaryColor}"
                                                  Margin="0,0,12,0"/>
                                        <CheckBox Content="Mask" 
                                                  IsChecked="True" 
                                                  Foreground="{DynamicResource TextPrimaryColor}"
                                                  Margin="0,0,12,0"/>
                                    </UniformGrid>
                                </StackPanel>
                            </Border>
                        </StackPanel>
                    </ScrollViewer>

                    <!-- Email Panel -->
                    <ScrollViewer x:Name="EmailPanel" Visibility="Collapsed" VerticalScrollBarVisibility="Auto">
                        <Grid MaxWidth="800" HorizontalAlignment="Left">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="200"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>  <!-- 0: SMTP Server -->
                                <RowDefinition Height="12"/>     <!-- 1: Spacing -->
                                <RowDefinition Height="Auto"/>  <!-- 2: Encryption Type -->
                                <RowDefinition Height="12"/>     <!-- 3: Spacing -->
                                <RowDefinition Height="Auto"/>  <!-- 4: Port -->
                                <RowDefinition Height="12"/>     <!-- 5: Spacing -->
                                <RowDefinition Height="Auto"/>  <!-- 6: Enable Server Auth -->
                                <RowDefinition Height="16"/>     <!-- 7: Spacing -->
                                <RowDefinition Height="Auto"/>  <!-- 8: Username -->
                                <RowDefinition Height="12"/>     <!-- 9: Spacing -->
                                <RowDefinition Height="Auto"/>  <!-- 10: Password -->
                                <RowDefinition Height="12"/>     <!-- 11: Spacing -->
                                <RowDefinition Height="Auto"/>  <!-- 12: Sender -->
                                <RowDefinition Height="12"/>     <!-- 13: Spacing -->
                                <RowDefinition Height="Auto"/>  <!-- 14: Recipient1 -->
                                <RowDefinition Height="12"/>     <!-- 15: Spacing -->
                                <RowDefinition Height="Auto"/>  <!-- 16: Recipient2 -->
                                <RowDefinition Height="12"/>     <!-- 17: Spacing -->
                                <RowDefinition Height="Auto"/>  <!-- 18: Recipient3 -->
                                <RowDefinition Height="20"/>     <!-- 19: Spacing -->
                                <RowDefinition Height="Auto"/>  <!-- 20: Button -->
                            </Grid.RowDefinitions>

                            <!-- SMTP Server -->
                            <TextBlock Grid.Row="0" Grid.Column="0" 
                                       Text="SMTP Server" 
                                       Foreground="{DynamicResource TextPrimaryColor}" 
                                       FontSize="12" 
                                       VerticalAlignment="Center"/>
                            <TextBox Grid.Row="0" Grid.Column="1" 
                                     x:Name="SmtpServerTextBox"
                                     Height="32"
                                     VerticalContentAlignment="Center"
                                     Foreground="{DynamicResource TextPrimaryColor}"/>

                            <!-- Encryption Type -->
                            <TextBlock Grid.Row="2" Grid.Column="0" 
                                       Text="Encryption Type" 
                                       Foreground="{DynamicResource TextPrimaryColor}" 
                                       FontSize="12" 
                                       VerticalAlignment="Center"/>
                            <StackPanel Grid.Row="2" Grid.Column="1" 
                                        Orientation="Horizontal">
                                <RadioButton x:Name="EncryptionOffRadio" 
                                             Content="Off" 
                                             GroupName="Encryption" 
                                             IsChecked="True"
                                             Foreground="{DynamicResource TextPrimaryColor}"
                                             Margin="0,0,24,0"/>
                                <RadioButton x:Name="EncryptionSslRadio" 
                                             Content="SSL" 
                                             GroupName="Encryption"
                                             Foreground="{DynamicResource TextPrimaryColor}"
                                             Margin="0,0,24,0"/>
                                <RadioButton x:Name="EncryptionStarttlsRadio" 
                                             Content="STARTTLS" 
                                             GroupName="Encryption"
                                             Foreground="{DynamicResource TextPrimaryColor}"/>
                            </StackPanel>

                            <!-- Port -->
                            <TextBlock Grid.Row="4" Grid.Column="0" 
                                       Text="Port" 
                                       Foreground="{DynamicResource TextPrimaryColor}" 
                                       FontSize="12" 
                                       VerticalAlignment="Center"/>
                            <TextBox Grid.Row="4" Grid.Column="1" 
                                     x:Name="SmtpPortTextBox"
                                     Height="32"
                                     Text="25"
                                     VerticalContentAlignment="Center"
                                     Foreground="{DynamicResource TextPrimaryColor}"/>

                            <!-- Enable Server Authentication -->
                            <CheckBox Grid.Row="6" Grid.ColumnSpan="2" 
                                      x:Name="EnableServerAuthCheckBox"
                                      Content="Enable Server Authentication" 
                                      Foreground="{DynamicResource TextPrimaryColor}"
                                      FontSize="12"
                                      Checked="EnableServerAuth_Changed"
                                      Unchecked="EnableServerAuth_Changed"/>

                            <!-- Username -->
                            <TextBlock Grid.Row="8" Grid.Column="0" 
                                       Text="Username" 
                                       Foreground="{DynamicResource TextPrimaryColor}" 
                                       FontSize="12" 
                                       VerticalAlignment="Center"/>
                            <TextBox Grid.Row="8" Grid.Column="1" 
                                     x:Name="EmailUsernameTextBox"
                                     Height="32"
                                     VerticalContentAlignment="Center"
                                     Foreground="{DynamicResource TextPrimaryColor}"
                                     IsEnabled="False"/>

                            <!-- Password -->
                            <TextBlock Grid.Row="10" Grid.Column="0" 
                                       Text="Password" 
                                       Foreground="{DynamicResource TextPrimaryColor}" 
                                       FontSize="12" 
                                       VerticalAlignment="Center"/>
                            <PasswordBox Grid.Row="10" Grid.Column="1" 
                                         x:Name="EmailPasswordBox"
                                         Height="32"
                                         VerticalContentAlignment="Center"
                                         Background="{DynamicResource BackgroundColor}"
                                         BorderBrush="{DynamicResource BorderColor}"
                                         Foreground="{DynamicResource TextPrimaryColor}"
                                         IsEnabled="False"/>

                            <!-- Sender -->
                            <TextBlock Grid.Row="12" Grid.Column="0" 
                                       Text="Sender" 
                                       Foreground="{DynamicResource TextPrimaryColor}" 
                                       FontSize="12" 
                                       VerticalAlignment="Center"/>
                            <TextBox Grid.Row="12" Grid.Column="1" 
                                     x:Name="SenderTextBox"
                                     Height="32"
                                     VerticalContentAlignment="Center"
                                     Foreground="{DynamicResource TextPrimaryColor}"/>

                            <!-- Recipient1 -->
                            <TextBlock Grid.Row="14" Grid.Column="0" 
                                       Text="Recipient1" 
                                       Foreground="{DynamicResource TextPrimaryColor}" 
                                       FontSize="12" 
                                       VerticalAlignment="Center"/>
                            <TextBox Grid.Row="14" Grid.Column="1" 
                                     x:Name="Recipient1TextBox"
                                     Height="32"
                                     VerticalContentAlignment="Center"
                                     Foreground="{DynamicResource TextPrimaryColor}"/>

                            <!-- Recipient2 -->
                            <TextBlock Grid.Row="16" Grid.Column="0" 
                                       Text="Recipient2" 
                                       Foreground="{DynamicResource TextPrimaryColor}" 
                                       FontSize="12" 
                                       VerticalAlignment="Center"/>
                            <TextBox Grid.Row="16" Grid.Column="1" 
                                     x:Name="Recipient2TextBox"
                                     Height="32"
                                     VerticalContentAlignment="Center"
                                     Foreground="{DynamicResource TextPrimaryColor}"/>

                            <!-- Recipient3 -->
                            <TextBlock Grid.Row="18" Grid.Column="0" 
                                       Text="Recipient3" 
                                       Foreground="{DynamicResource TextPrimaryColor}" 
                                       FontSize="12" 
                                       VerticalAlignment="Center"/>
                            <TextBox Grid.Row="18" Grid.Column="1" 
                                     x:Name="Recipient3TextBox"
                                     Height="32"
                                     VerticalContentAlignment="Center"
                                     Foreground="{DynamicResource TextPrimaryColor}"/>

                            <!-- Send Test Email Button -->
                            <Button Grid.Row="20" Grid.ColumnSpan="2"
                                    x:Name="SendTestEmailButton"
                                    Content="Send Test Email" 
                                    Width="160"
                                    Height="40"
                                    Margin="0,0,0,0"
                                    HorizontalAlignment="Left"
                                    Style="{StaticResource BottomBarButtonStyle}"
                                    Click="SendTestEmail_Click"/>
                        </Grid>
                    </ScrollViewer>

                    <!-- Alarm Panel -->
                    <Grid x:Name="AlarmPanel" Visibility="Collapsed">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="20"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="10"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="20"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="10"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="16"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="20"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>

                        <!-- Alarm Recording Preview Section -->
                        <TextBlock Grid.Row="0" Grid.Column="0" 
                                   Text="Alarm Recording Preview" 
                                   Foreground="{DynamicResource TextPrimaryColor}" 
                                   FontSize="13" 
                                   FontWeight="SemiBold"
                                   VerticalAlignment="Center"/>

                        <!-- Stop Playback After(s) -->
                        <StackPanel Grid.Row="2" Grid.Column="0" Orientation="Horizontal" HorizontalAlignment="Left">
                            <TextBlock Text="Stop Playback After(s)" 
                                       Foreground="{DynamicResource TextPrimaryColor}" 
                                       FontSize="12" 
                                       VerticalAlignment="Center"
                                       Width="180"/>
                            <TextBox x:Name="StopPlaybackAfterTextBox"
                                     Width="60" 
                                     Height="24" 
                                     Text="5"
                                     VerticalContentAlignment="Center"
                                     HorizontalContentAlignment="Center"
                                     Foreground="{DynamicResource TextPrimaryColor}"
                                     Margin="8,0,8,0"/>
                            <TextBlock Text="[0-3600]" 
                                       Foreground="{DynamicResource TextSecondaryColor}" 
                                       FontSize="11" 
                                       VerticalAlignment="Center"/>
                        </StackPanel>

                        <!-- Start Playback Before(s) -->
                        <StackPanel Grid.Row="4" Grid.Column="0" Orientation="Horizontal" HorizontalAlignment="Left">
                            <TextBlock Text="Start Playback Before(s)" 
                                       Foreground="{DynamicResource TextPrimaryColor}" 
                                       FontSize="12" 
                                       VerticalAlignment="Center"
                                       Width="180"/>
                            <TextBox x:Name="StartPlaybackBeforeTextBox"
                                     Width="60" 
                                     Height="24" 
                                     Text="5"
                                     VerticalContentAlignment="Center"
                                     HorizontalContentAlignment="Center"
                                     Foreground="{DynamicResource TextPrimaryColor}"
                                     Margin="8,0,8,0"/>
                            <TextBlock Text="[0-3600]" 
                                       Foreground="{DynamicResource TextSecondaryColor}" 
                                       FontSize="11" 
                                       VerticalAlignment="Center"/>
                        </StackPanel>

                        <!-- Alarm Sound Management Section -->
                        <TextBlock Grid.Row="6" Grid.Column="0" 
                                   Text="Alarm Sound Management" 
                                   Foreground="{DynamicResource TextPrimaryColor}" 
                                   FontSize="13" 
                                   FontWeight="SemiBold"
                                   VerticalAlignment="Center"/>

                        <!-- Enable Alarm Sound -->
                        <CheckBox x:Name="EnableAlarmSoundCheckBox"
                                  Grid.Row="8" Grid.Column="0"
                                  Content="Enable Alarm Sound" 
                                  Foreground="{DynamicResource TextPrimaryColor}"
                                  FontSize="12"
                                  Margin="0,8,0,0"/>

                        <!-- Action Buttons -->
                        <StackPanel Grid.Row="10" Grid.Column="0" 
                                    Orientation="Horizontal" 
                                    HorizontalAlignment="Left"
                                    Margin="0,16,0,0">
                            <Button x:Name="AddAlarmButton"
                                    Width="80" 
                                    Height="32" 
                                    Margin="0,0,8,0"
                                    Style="{StaticResource BottomBarButtonStyle}"
                                    Click="AddAlarm_Click">
                                <Button.Content>
                                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                        <TextBlock Text="+" FontSize="14" Margin="0,0,6,0" Foreground="White"/>
                                        <TextBlock Text="Add" FontSize="12" FontWeight="SemiBold" Foreground="White"/>
                                    </StackPanel>
                                </Button.Content>
                            </Button>
                            
                            <Button x:Name="DeleteAlarmButton"
                                    Width="85" 
                                    Height="32" 
                                    Margin="0,0,8,0"
                                    Style="{StaticResource DefaultButtonStyle}"
                                    Click="DeleteAlarm_Click">
                                <Button.Content>
                                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                        <TextBlock Text="ðŸ—‘" FontSize="12" Margin="0,0,6,0" Foreground="White"/>
                                        <TextBlock Text="Delete" FontSize="12" FontWeight="SemiBold" Foreground="White"/>
                                    </StackPanel>
                                </Button.Content>
                            </Button>
                            
                            <Button x:Name="EnableAlarmButton"
                                    Width="85" 
                                    Height="32" 
                                    Margin="0,0,8,0"
                                    Style="{StaticResource ApplyButtonStyle}"
                                    Click="EnableAlarm_Click">
                                <Button.Content>
                                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                        <TextBlock Text="â–¶" FontSize="12" Margin="0,0,6,0" Foreground="White"/>
                                        <TextBlock Text="Enable" FontSize="12" FontWeight="SemiBold" Foreground="White"/>
                                    </StackPanel>
                                </Button.Content>
                            </Button>
                            
                            <Button x:Name="PlayCountAlarmButton"
                                    Width="100" 
                                    Height="32"
                                    Style="{StaticResource DefaultButtonStyle}"
                                    Click="PlayCountAlarm_Click">
                                <Button.Content>
                                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                        <TextBlock Text="âš™" FontSize="12" Margin="0,0,6,0" Foreground="White"/>
                                        <TextBlock Text="Play Count" FontSize="12" FontWeight="SemiBold" Foreground="White"/>
                                    </StackPanel>
                                </Button.Content>
                            </Button>
                        </StackPanel>

                        <!-- Alarm Data Table -->
                        <Border Grid.Row="12" Grid.Column="0" 
                                Background="{DynamicResource SurfaceColor}"
                                BorderBrush="{DynamicResource BorderColor}"
                                BorderThickness="1"
                                CornerRadius="6"
                                Margin="0,20,0,0">
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>  <!-- Header -->
                                    <RowDefinition Height="*"/>     <!-- Data Rows -->
                                </Grid.RowDefinitions>
                                
                                <!-- Table Header -->
                                <Border Grid.Row="0" 
                                        Background="{DynamicResource PrimaryColor}"
                                        CornerRadius="6,6,0,0">
                                    <Grid Height="36">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="40"/>
                                            <ColumnDefinition Width="220"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="100"/>
                                            <ColumnDefinition Width="100"/>
                                            <ColumnDefinition Width="140"/>
                                        </Grid.ColumnDefinitions>
                                        
                                        <CheckBox Grid.Column="0" 
                                                  HorizontalAlignment="Center" 
                                                  VerticalAlignment="Center"
                                                  Foreground="White"/>
                                        <TextBlock Grid.Column="1" 
                                                   Text="Alarm Type" 
                                                   Foreground="White" 
                                                   FontSize="12" 
                                                   FontWeight="SemiBold"
                                                   VerticalAlignment="Center"
                                                   Margin="8,0,0,0"/>
                                        <TextBlock Grid.Column="2" 
                                                   Text="Audio File" 
                                                   Foreground="White" 
                                                   FontSize="12" 
                                                   FontWeight="SemiBold"
                                                   VerticalAlignment="Center"
                                                   Margin="8,0,0,0"/>
                                        <TextBlock Grid.Column="3" 
                                                   Text="Play Count" 
                                                   Foreground="White" 
                                                   FontSize="12" 
                                                   FontWeight="SemiBold"
                                                   VerticalAlignment="Center"
                                                   HorizontalAlignment="Center"/>
                                        <TextBlock Grid.Column="4" 
                                                   Text="Status" 
                                                   Foreground="White" 
                                                   FontSize="12" 
                                                   FontWeight="SemiBold"
                                                   VerticalAlignment="Center"
                                                   HorizontalAlignment="Center"/>
                                        <TextBlock Grid.Column="5" 
                                                   Text="Operation" 
                                                   Foreground="White" 
                                                   FontSize="12" 
                                                   FontWeight="SemiBold"
                                                   VerticalAlignment="Center"
                                                   HorizontalAlignment="Center"/>
                                    </Grid>
                                </Border>
                                
                                <!-- Table Data Rows -->
                                <StackPanel Grid.Row="1">
                                    
                                    <!-- Row 1: Default Alarm -->
                                    <Border Background="Transparent" 
                                            BorderBrush="{DynamicResource BorderColor}" 
                                            BorderThickness="0,0,0,1">
                                        <Grid Height="40">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="40"/>
                                                <ColumnDefinition Width="220"/>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="100"/>
                                                <ColumnDefinition Width="100"/>
                                                <ColumnDefinition Width="140"/>
                                            </Grid.ColumnDefinitions>
                                            
                                            <CheckBox Grid.Column="0" 
                                                      HorizontalAlignment="Center" 
                                                      VerticalAlignment="Center"
                                                      Foreground="{DynamicResource TextPrimaryColor}"/>
                                            <TextBlock Grid.Column="1" 
                                                       Text="Default Alarm" 
                                                       Foreground="{DynamicResource TextPrimaryColor}" 
                                                       FontSize="12" 
                                                       FontWeight="Medium"
                                                       VerticalAlignment="Center"
                                                       Margin="8,0,0,0"/>
                                            <TextBlock Grid.Column="2" 
                                                       Text="C:\Users\Public\Alarm Sounds\default.wav" 
                                                       Foreground="{DynamicResource TextSecondaryColor}" 
                                                       FontSize="11" 
                                                       VerticalAlignment="Center"
                                                       Margin="8,0,0,0"
                                                       TextTrimming="CharacterEllipsis"/>
                                            <TextBlock Grid.Column="3" 
                                                       Text="1" 
                                                       Foreground="{DynamicResource TextPrimaryColor}" 
                                                       FontSize="12" 
                                                       FontWeight="Medium"
                                                       VerticalAlignment="Center"
                                                       HorizontalAlignment="Center"/>
                                            <Border Grid.Column="4" 
                                                    Background="{DynamicResource ErrorColor}" 
                                                    CornerRadius="12" 
                                                    HorizontalAlignment="Center" 
                                                    VerticalAlignment="Center"
                                                    Padding="8,4">
                                                <TextBlock Text="Disabled" 
                                                           Foreground="White" 
                                                           FontSize="10" 
                                                           FontWeight="SemiBold"
                                                           HorizontalAlignment="Center"/>
                                            </Border>
                                            <StackPanel Grid.Column="5" 
                                                        Orientation="Horizontal" 
                                                        HorizontalAlignment="Center"
                                                        VerticalAlignment="Center">
                                                <Button Width="28" Height="28" 
                                                        Background="{DynamicResource BackgroundColor}"
                                                        BorderBrush="{DynamicResource BorderColor}"
                                                        BorderThickness="1"
                                                        ToolTip="Edit"
                                                        Margin="2,0">
                                                    <TextBlock Text="âœ" FontSize="12" 
                                                               Foreground="{DynamicResource PrimaryColor}"/>
                                                </Button>
                                                <Button Width="28" Height="28" 
                                                        Background="{DynamicResource BackgroundColor}"
                                                        BorderBrush="{DynamicResource BorderColor}"
                                                        BorderThickness="1"
                                                        ToolTip="Listen"
                                                        Margin="4,0,2,0">
                                                    <TextBlock Text="ðŸŽ§" FontSize="12" 
                                                               Foreground="{DynamicResource SuccessColor}"/>
                                                </Button>
                                            </StackPanel>
                                        </Grid>
                                    </Border>
                                    
                                    <!-- Row 2: Alarm Input Start -->
                                    <Border Background="Transparent" 
                                            BorderBrush="{DynamicResource BorderColor}" 
                                            BorderThickness="0,0,0,1">
                                        <Grid Height="40">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="40"/>
                                                <ColumnDefinition Width="220"/>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="100"/>
                                                <ColumnDefinition Width="100"/>
                                                <ColumnDefinition Width="140"/>
                                            </Grid.ColumnDefinitions>
                                            
                                            <CheckBox Grid.Column="0" 
                                                      HorizontalAlignment="Center" 
                                                      VerticalAlignment="Center"
                                                      Foreground="{DynamicResource TextPrimaryColor}"/>
                                            <TextBlock Grid.Column="1" 
                                                       Text="Alarm Input Start" 
                                                       Foreground="{DynamicResource TextPrimaryColor}" 
                                                       FontSize="12" 
                                                       FontWeight="Medium"
                                                       VerticalAlignment="Center"
                                                       Margin="8,0,0,0"/>
                                            <TextBlock Grid.Column="2" 
                                                       Text="C:\Users\Public\Alarm Sounds\input_start.wav" 
                                                       Foreground="{DynamicResource TextSecondaryColor}" 
                                                       FontSize="11" 
                                                       VerticalAlignment="Center"
                                                       Margin="8,0,0,0"
                                                       TextTrimming="CharacterEllipsis"/>
                                            <TextBlock Grid.Column="3" 
                                                       Text="1" 
                                                       Foreground="{DynamicResource TextPrimaryColor}" 
                                                       FontSize="12" 
                                                       FontWeight="Medium"
                                                       VerticalAlignment="Center"
                                                       HorizontalAlignment="Center"/>
                                            <Border Grid.Column="4" 
                                                    Background="{DynamicResource ErrorColor}" 
                                                    CornerRadius="12" 
                                                    HorizontalAlignment="Center" 
                                                    VerticalAlignment="Center"
                                                    Padding="8,4">
                                                <TextBlock Text="Disabled" 
                                                           Foreground="White" 
                                                           FontSize="10" 
                                                           FontWeight="SemiBold"
                                                           HorizontalAlignment="Center"/>
                                            </Border>
                                            <StackPanel Grid.Column="5" 
                                                        Orientation="Horizontal" 
                                                        HorizontalAlignment="Center"
                                                        VerticalAlignment="Center">
                                                <Button Width="28" Height="28" 
                                                        Background="{DynamicResource BackgroundColor}"
                                                        BorderBrush="{DynamicResource BorderColor}"
                                                        BorderThickness="1"
                                                        ToolTip="Edit"
                                                        Margin="2,0">
                                                    <TextBlock Text="âœ" FontSize="12" 
                                                               Foreground="{DynamicResource PrimaryColor}"/>
                                                </Button>
                                                <Button Width="28" Height="28" 
                                                        Background="{DynamicResource BackgroundColor}"
                                                        BorderBrush="{DynamicResource BorderColor}"
                                                        BorderThickness="1"
                                                        ToolTip="Listen"
                                                        Margin="2,0">
                                                    <TextBlock Text="ðŸŽ§" FontSize="12" 
                                                               Foreground="{DynamicResource SuccessColor}"/>
                                                </Button>
                                                <Button Width="28" Height="28" 
                                                        Background="{DynamicResource BackgroundColor}"
                                                        BorderBrush="{DynamicResource BorderColor}"
                                                        BorderThickness="1"
                                                        ToolTip="Delete"
                                                        Margin="2,0">
                                                    <TextBlock Text="ðŸ—‘" FontSize="12" 
                                                               Foreground="{DynamicResource ErrorColor}"/>
                                                </Button>
                                            </StackPanel>
                                        </Grid>
                                    </Border>
                                    
                                    <!-- Row 3: Device Offline -->
                                    <Border Background="Transparent" 
                                            BorderBrush="{DynamicResource BorderColor}" 
                                            BorderThickness="0,0,0,1">
                                        <Grid Height="40">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="40"/>
                                                <ColumnDefinition Width="220"/>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="100"/>
                                                <ColumnDefinition Width="100"/>
                                                <ColumnDefinition Width="140"/>
                                            </Grid.ColumnDefinitions>
                                            
                                            <CheckBox Grid.Column="0" 
                                                      HorizontalAlignment="Center" 
                                                      VerticalAlignment="Center"
                                                      Foreground="{DynamicResource TextPrimaryColor}"/>
                                            <TextBlock Grid.Column="1" 
                                                       Text="Device Offline" 
                                                       Foreground="{DynamicResource TextPrimaryColor}" 
                                                       FontSize="12" 
                                                       FontWeight="Medium"
                                                       VerticalAlignment="Center"
                                                       Margin="8,0,0,0"/>
                                            <TextBlock Grid.Column="2" 
                                                       Text="C:\Users\Public\Alarm Sounds\device_offline.wav" 
                                                       Foreground="{DynamicResource TextSecondaryColor}" 
                                                       FontSize="11" 
                                                       VerticalAlignment="Center"
                                                       Margin="8,0,0,0"
                                                       TextTrimming="CharacterEllipsis"/>
                                            <TextBlock Grid.Column="3" 
                                                       Text="1" 
                                                       Foreground="{DynamicResource TextPrimaryColor}" 
                                                       FontSize="12" 
                                                       FontWeight="Medium"
                                                       VerticalAlignment="Center"
                                                       HorizontalAlignment="Center"/>
                                            <Border Grid.Column="4" 
                                                    Background="{DynamicResource ErrorColor}" 
                                                    CornerRadius="12" 
                                                    HorizontalAlignment="Center" 
                                                    VerticalAlignment="Center"
                                                    Padding="8,4">
                                                <TextBlock Text="Disabled" 
                                                           Foreground="White" 
                                                           FontSize="10" 
                                                           FontWeight="SemiBold"
                                                           HorizontalAlignment="Center"/>
                                            </Border>
                                            <StackPanel Grid.Column="5" 
                                                        Orientation="Horizontal" 
                                                        HorizontalAlignment="Center"
                                                        VerticalAlignment="Center">
                                                <Button Width="28" Height="28" 
                                                        Background="{DynamicResource BackgroundColor}"
                                                        BorderBrush="{DynamicResource BorderColor}"
                                                        BorderThickness="1"
                                                        ToolTip="Edit"
                                                        Margin="2,0">
                                                    <TextBlock Text="âœ" FontSize="12" 
                                                               Foreground="{DynamicResource PrimaryColor}"/>
                                                </Button>
                                                <Button Width="28" Height="28" 
                                                        Background="{DynamicResource BackgroundColor}"
                                                        BorderBrush="{DynamicResource BorderColor}"
                                                        BorderThickness="1"
                                                        ToolTip="Listen"
                                                        Margin="2,0">
                                                    <TextBlock Text="ðŸŽ§" FontSize="12" 
                                                               Foreground="{DynamicResource SuccessColor}"/>
                                                </Button>
                                                <Button Width="28" Height="28" 
                                                        Background="{DynamicResource BackgroundColor}"
                                                        BorderBrush="{DynamicResource BorderColor}"
                                                        BorderThickness="1"
                                                        ToolTip="Delete"
                                                        Margin="2,0">
                                                    <TextBlock Text="ðŸ—‘" FontSize="12" 
                                                               Foreground="{DynamicResource ErrorColor}"/>
                                                </Button>
                                            </StackPanel>
                                        </Grid>
                                    </Border>
                                    
                                    <!-- Row 4: Tampering Detection (Highlighted) -->
                                    <Border Background="{DynamicResource MenuHoverColor}" 
                                            BorderBrush="{DynamicResource BorderColor}" 
                                            BorderThickness="0,0,0,1">
                                        <Grid Height="40">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="40"/>
                                                <ColumnDefinition Width="220"/>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="100"/>
                                                <ColumnDefinition Width="100"/>
                                                <ColumnDefinition Width="140"/>
                                            </Grid.ColumnDefinitions>
                                            
                                            <CheckBox Grid.Column="0" 
                                                      HorizontalAlignment="Center" 
                                                      VerticalAlignment="Center"
                                                      Foreground="{DynamicResource TextPrimaryColor}"/>
                                            <TextBlock Grid.Column="1" 
                                                       Text="Tampering Detection" 
                                                       Foreground="{DynamicResource TextPrimaryColor}" 
                                                       FontSize="12" 
                                                       FontWeight="Medium"
                                                       VerticalAlignment="Center"
                                                       Margin="8,0,0,0"/>
                                            <TextBlock Grid.Column="2" 
                                                       Text="C:\Users\Public\Alarm Sounds\tampering.wav" 
                                                       Foreground="{DynamicResource TextSecondaryColor}" 
                                                       FontSize="11" 
                                                       VerticalAlignment="Center"
                                                       Margin="8,0,0,0"
                                                       TextTrimming="CharacterEllipsis"/>
                                            <TextBlock Grid.Column="3" 
                                                       Text="1" 
                                                       Foreground="{DynamicResource TextPrimaryColor}" 
                                                       FontSize="12" 
                                                       FontWeight="Medium"
                                                       VerticalAlignment="Center"
                                                       HorizontalAlignment="Center"/>
                                            <Border Grid.Column="4" 
                                                    Background="{DynamicResource ErrorColor}" 
                                                    CornerRadius="12" 
                                                    HorizontalAlignment="Center" 
                                                    VerticalAlignment="Center"
                                                    Padding="8,4">
                                                <TextBlock Text="Disabled" 
                                                           Foreground="White" 
                                                           FontSize="10" 
                                                           FontWeight="SemiBold"
                                                           HorizontalAlignment="Center"/>
                                            </Border>
                                            <StackPanel Grid.Column="5" 
                                                        Orientation="Horizontal" 
                                                        HorizontalAlignment="Center"
                                                        VerticalAlignment="Center">
                                                <Button Width="28" Height="28" 
                                                        Background="{DynamicResource BackgroundColor}"
                                                        BorderBrush="{DynamicResource BorderColor}"
                                                        BorderThickness="1"
                                                        ToolTip="Edit"
                                                        Margin="2,0">
                                                    <TextBlock Text="âœ" FontSize="12" 
                                                               Foreground="{DynamicResource PrimaryColor}"/>
                                                </Button>
                                                <Button Width="28" Height="28" 
                                                        Background="{DynamicResource BackgroundColor}"
                                                        BorderBrush="{DynamicResource BorderColor}"
                                                        BorderThickness="1"
                                                        ToolTip="Listen"
                                                        Margin="2,0">
                                                    <TextBlock Text="ðŸŽ§" FontSize="12" 
                                                               Foreground="{DynamicResource SuccessColor}"/>
                                                </Button>
                                                <Button Width="28" Height="28" 
                                                        Background="{DynamicResource BackgroundColor}"
                                                        BorderBrush="{DynamicResource BorderColor}"
                                                        BorderThickness="1"
                                                        ToolTip="Delete"
                                                        Margin="2,0">
                                                    <TextBlock Text="ðŸ—‘" FontSize="12" 
                                                               Foreground="{DynamicResource ErrorColor}"/>
                                                </Button>
                                            </StackPanel>
                                        </Grid>
                                    </Border>
                                    
                                    <!-- Row 5: Motion Detection -->
                                    <Border Background="Transparent" 
                                            BorderBrush="{DynamicResource BorderColor}" 
                                            BorderThickness="0,0,0,1">
                                        <Grid Height="40">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="40"/>
                                                <ColumnDefinition Width="220"/>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="100"/>
                                                <ColumnDefinition Width="100"/>
                                                <ColumnDefinition Width="140"/>
                                            </Grid.ColumnDefinitions>
                                            
                                            <CheckBox Grid.Column="0" 
                                                      HorizontalAlignment="Center" 
                                                      VerticalAlignment="Center"
                                                      Foreground="{DynamicResource TextPrimaryColor}"/>
                                            <TextBlock Grid.Column="1" 
                                                       Text="Motion Detection" 
                                                       Foreground="{DynamicResource TextPrimaryColor}" 
                                                       FontSize="12" 
                                                       FontWeight="Medium"
                                                       VerticalAlignment="Center"
                                                       Margin="8,0,0,0"/>
                                            <TextBlock Grid.Column="2" 
                                                       Text="C:\Users\Public\Alarm Sounds\motion.wav" 
                                                       Foreground="{DynamicResource TextSecondaryColor}" 
                                                       FontSize="11" 
                                                       VerticalAlignment="Center"
                                                       Margin="8,0,0,0"
                                                       TextTrimming="CharacterEllipsis"/>
                                            <TextBlock Grid.Column="3" 
                                                       Text="1" 
                                                       Foreground="{DynamicResource TextPrimaryColor}" 
                                                       FontSize="12" 
                                                       FontWeight="Medium"
                                                       VerticalAlignment="Center"
                                                       HorizontalAlignment="Center"/>
                                            <Border Grid.Column="4" 
                                                    Background="{DynamicResource ErrorColor}" 
                                                    CornerRadius="12" 
                                                    HorizontalAlignment="Center" 
                                                    VerticalAlignment="Center"
                                                    Padding="8,4">
                                                <TextBlock Text="Disabled" 
                                                           Foreground="White" 
                                                           FontSize="10" 
                                                           FontWeight="SemiBold"
                                                           HorizontalAlignment="Center"/>
                                            </Border>
                                            <StackPanel Grid.Column="5" 
                                                        Orientation="Horizontal" 
                                                        HorizontalAlignment="Center"
                                                        VerticalAlignment="Center">
                                                <Button Width="28" Height="28" 
                                                        Background="{DynamicResource BackgroundColor}"
                                                        BorderBrush="{DynamicResource BorderColor}"
                                                        BorderThickness="1"
                                                        ToolTip="Edit"
                                                        Margin="2,0">
                                                    <TextBlock Text="âœ" FontSize="12" 
                                                               Foreground="{DynamicResource PrimaryColor}"/>
                                                </Button>
                                                <Button Width="28" Height="28" 
                                                        Background="{DynamicResource BackgroundColor}"
                                                        BorderBrush="{DynamicResource BorderColor}"
                                                        BorderThickness="1"
                                                        ToolTip="Listen"
                                                        Margin="2,0">
                                                    <TextBlock Text="ðŸŽ§" FontSize="12" 
                                                               Foreground="{DynamicResource SuccessColor}"/>
                                                </Button>
                                                <Button Width="28" Height="28" 
                                                        Background="{DynamicResource BackgroundColor}"
                                                        BorderBrush="{DynamicResource BorderColor}"
                                                        BorderThickness="1"
                                                        ToolTip="Delete"
                                                        Margin="2,0">
                                                    <TextBlock Text="ðŸ—‘" FontSize="12" 
                                                               Foreground="{DynamicResource ErrorColor}"/>
                                                </Button>
                                            </StackPanel>
                                        </Grid>
                                    </Border>
                                    
                                    <!-- Row 6: Elevator Entrance -->
                                    <Border Background="Transparent" 
                                            BorderBrush="{DynamicResource BorderColor}" 
                                            BorderThickness="0,0,0,0"
                                            CornerRadius="0,0,6,6">
                                        <Grid Height="40">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="40"/>
                                                <ColumnDefinition Width="220"/>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="100"/>
                                                <ColumnDefinition Width="100"/>
                                                <ColumnDefinition Width="140"/>
                                            </Grid.ColumnDefinitions>
                                            
                                            <CheckBox Grid.Column="0" 
                                                      HorizontalAlignment="Center" 
                                                      VerticalAlignment="Center"
                                                      Foreground="{DynamicResource TextPrimaryColor}"/>
                                            <TextBlock Grid.Column="1" 
                                                       Text="Elevator Entrance" 
                                                       Foreground="{DynamicResource TextPrimaryColor}" 
                                                       FontSize="12" 
                                                       FontWeight="Medium"
                                                       VerticalAlignment="Center"
                                                       Margin="8,0,0,0"/>
                                            <TextBlock Grid.Column="2" 
                                                       Text="C:\Users\Public\Alarm Sounds\elevator.wav" 
                                                       Foreground="{DynamicResource TextSecondaryColor}" 
                                                       FontSize="11" 
                                                       VerticalAlignment="Center"
                                                       Margin="8,0,0,0"
                                                       TextTrimming="CharacterEllipsis"/>
                                            <TextBlock Grid.Column="3" 
                                                       Text="1" 
                                                       Foreground="{DynamicResource TextPrimaryColor}" 
                                                       FontSize="12" 
                                                       FontWeight="Medium"
                                                       VerticalAlignment="Center"
                                                       HorizontalAlignment="Center"/>
                                            <Border Grid.Column="4" 
                                                    Background="{DynamicResource ErrorColor}" 
                                                    CornerRadius="12" 
                                                    HorizontalAlignment="Center" 
                                                    VerticalAlignment="Center"
                                                    Padding="8,4">
                                                <TextBlock Text="Disabled" 
                                                           Foreground="White" 
                                                           FontSize="10" 
                                                           FontWeight="SemiBold"
                                                           HorizontalAlignment="Center"/>
                                            </Border>
                                            <StackPanel Grid.Column="5" 
                                                        Orientation="Horizontal" 
                                                        HorizontalAlignment="Center"
                                                        VerticalAlignment="Center">
                                                <Button Width="28" Height="28" 
                                                        Background="{DynamicResource BackgroundColor}"
                                                        BorderBrush="{DynamicResource BorderColor}"
                                                        BorderThickness="1"
                                                        ToolTip="Edit"
                                                        Margin="2,0">
                                                    <TextBlock Text="âœ" FontSize="12" 
                                                               Foreground="{DynamicResource PrimaryColor}"/>
                                                </Button>
                                                <Button Width="28" Height="28" 
                                                        Background="{DynamicResource BackgroundColor}"
                                                        BorderBrush="{DynamicResource BorderColor}"
                                                        BorderThickness="1"
                                                        ToolTip="Listen"
                                                        Margin="2,0">
                                                    <TextBlock Text="ðŸŽ§" FontSize="12" 
                                                               Foreground="{DynamicResource SuccessColor}"/>
                                                </Button>
                                                <Button Width="28" Height="28" 
                                                        Background="{DynamicResource BackgroundColor}"
                                                        BorderBrush="{DynamicResource BorderColor}"
                                                        BorderThickness="1"
                                                        ToolTip="Delete"
                                                        Margin="2,0">
                                                    <TextBlock Text="ðŸ—‘" FontSize="12" 
                                                               Foreground="{DynamicResource ErrorColor}"/>
                                                </Button>
                                            </StackPanel>
                                        </Grid>
                                    </Border>
                                    
                                </StackPanel>
                            </Grid>
                        </Border>
                    </Grid>

                    <!-- Epidemic Control Panel -->
                    <ScrollViewer x:Name="EpidemicControlPanel" Visibility="Collapsed" VerticalScrollBarVisibility="Auto">
                        <Border Background="{DynamicResource SurfaceColor}" 
                                BorderBrush="{DynamicResource BorderColor}" 
                                BorderThickness="1" 
                                CornerRadius="6" 
                                Padding="24"
                                MaxWidth="800"
                                HorizontalAlignment="Left">
                            <StackPanel>
                                <!-- Header -->
                                <TextBlock Text="Epidemic Control Settings" 
                                           Foreground="{DynamicResource PrimaryColor}" 
                                           FontSize="15" 
                                           FontWeight="SemiBold"
                                           Margin="0,0,0,20"/>

                                <!-- Temperature Unit Section -->
                                <Border Background="{DynamicResource BackgroundColor}"
                                        BorderBrush="{DynamicResource BorderColor}"
                                        BorderThickness="1"
                                        CornerRadius="4"
                                        Padding="16"
                                        Margin="0,0,0,16">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        
                                        <TextBlock Grid.Column="0" 
                                                   Text="Temperature Unit" 
                                                   Foreground="{DynamicResource TextPrimaryColor}" 
                                                   FontSize="13" 
                                                   FontWeight="Medium"
                                                   VerticalAlignment="Center"
                                                   Width="240"/>
                                        <StackPanel Grid.Column="1" 
                                                    Orientation="Horizontal">
                                            <RadioButton x:Name="TempUnitCelsiusRadio" 
                                                         Content="Celsius" 
                                                         GroupName="TempUnit" 
                                                         IsChecked="True"
                                                         Foreground="{DynamicResource TextPrimaryColor}"
                                                         FontSize="13"
                                                         Margin="0,0,30,0"/>
                                            <RadioButton x:Name="TempUnitFahrenheitRadio" 
                                                         Content="Fahrenheit" 
                                                         GroupName="TempUnit"
                                                         Foreground="{DynamicResource TextPrimaryColor}"
                                                         FontSize="13"/>
                                        </StackPanel>
                                    </Grid>
                                </Border>

                                <!-- Detection Options Section -->
                                <Border Background="{DynamicResource BackgroundColor}"
                                        BorderBrush="{DynamicResource BorderColor}"
                                        BorderThickness="1"
                                        CornerRadius="4"
                                        Padding="16"
                                        Margin="0,0,0,16">
                                    <StackPanel>
                                        <TextBlock Text="Detection Options" 
                                                   Foreground="{DynamicResource TextSecondaryColor}" 
                                                   FontSize="12" 
                                                   FontWeight="SemiBold"
                                                   Margin="0,0,0,12"/>
                                        
                                        <!-- Mask Detection -->
                                        <CheckBox x:Name="MaskDetectionCheckBox"
                                                  Content="Mask Detection" 
                                                  IsChecked="True"
                                                  Foreground="{DynamicResource TextPrimaryColor}"
                                                  FontSize="13"
                                                  Margin="0,0,0,12"/>

                                        <!-- Abnormal Temperature Detection -->
                                        <CheckBox x:Name="AbnormalTempDetectionCheckBox"
                                                  Content="Abnormal Temperature Detection" 
                                                  IsChecked="True"
                                                  Foreground="{DynamicResource TextPrimaryColor}"
                                                  FontSize="13"
                                                  Checked="AbnormalTempDetection_Changed"
                                                  Unchecked="AbnormalTempDetection_Changed"/>
                                    </StackPanel>
                                </Border>

                                <!-- Temperature Threshold Section -->
                                <Border Background="{DynamicResource BackgroundColor}"
                                        BorderBrush="{DynamicResource BorderColor}"
                                        BorderThickness="1"
                                        CornerRadius="4"
                                        Padding="16"
                                        Margin="0,0,0,16">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="8"/>
                                            <RowDefinition Height="Auto"/>
                                        </Grid.RowDefinitions>

                                        <TextBlock Grid.Row="0" Grid.ColumnSpan="2"
                                                   Text="ðŸŒ¡ï¸ Abnormal Temperature Threshold" 
                                                   Foreground="{DynamicResource TextPrimaryColor}" 
                                                   FontSize="13" 
                                                   FontWeight="SemiBold"/>
                                        
                                        <StackPanel Grid.Row="2" Grid.ColumnSpan="2"
                                                    Orientation="Horizontal">
                                            <TextBox x:Name="TempThresholdTextBox"
                                                     Width="150"
                                                     Height="36"
                                                     Text="37.3"
                                                     FontSize="14"
                                                     VerticalContentAlignment="Center"
                                                     Foreground="{DynamicResource TextPrimaryColor}"/>
                                            <TextBlock Text="Â°C" 
                                                       Margin="12,0,0,0" 
                                                       VerticalAlignment="Center" 
                                                       Foreground="{DynamicResource TextPrimaryColor}"
                                                       FontSize="14"
                                                       FontWeight="Medium"/>
                                        </StackPanel>
                                    </Grid>
                                </Border>

                                <!-- Alarm Actions Section -->
                                <Border Background="{DynamicResource BackgroundColor}"
                                        BorderBrush="{DynamicResource BorderColor}"
                                        BorderThickness="1"
                                        CornerRadius="4"
                                        Padding="16">
                                    <StackPanel>
                                        <TextBlock Text="Alarm Actions" 
                                                   Foreground="{DynamicResource TextSecondaryColor}" 
                                                   FontSize="12" 
                                                   FontWeight="SemiBold"
                                                   Margin="0,0,0,12"/>
                                        
                                        <!-- Alarm Sound -->
                                        <CheckBox x:Name="AlarmSoundCheckBox"
                                                  Content="Alarm Sound" 
                                                  IsChecked="True"
                                                  Foreground="{DynamicResource TextPrimaryColor}"
                                                  FontSize="13"
                                                  Margin="0,0,0,12"/>

                                        <!-- Pop-up Alarm Window -->
                                        <CheckBox x:Name="PopupAlarmWindowCheckBox"
                                                  Content="Pop-up Alarm Window" 
                                                  IsChecked="True"
                                                  Foreground="{DynamicResource TextPrimaryColor}"
                                                  FontSize="13"
                                                  Margin="0,0,0,12"/>

                                        <!-- Send Email -->
                                        <CheckBox x:Name="SendEmailCheckBox"
                                                  Content="Send Email" 
                                                  IsChecked="True"
                                                  Foreground="{DynamicResource TextPrimaryColor}"
                                                  FontSize="13"/>
                                    </StackPanel>
                                </Border>
                            </StackPanel>
                        </Border>
                    </ScrollViewer>
                </Grid>
            </Border>
        </Grid>

        <!-- Bottom Bar -->
        <Border Grid.Row="1" 
                Background="{DynamicResource SurfaceColor}" 
                BorderBrush="{DynamicResource BorderColor}"
                BorderThickness="0,1,0,0"
                Padding="12,8">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <!-- Left Side - Default Button -->
                <StackPanel Grid.Column="0" 
                            Orientation="Horizontal" 
                            HorizontalAlignment="Left">
                    <Button Content="Default" 
                            Style="{StaticResource DefaultButtonStyle}"
                            Click="DefaultButton_Click"/>
                </StackPanel>

                <!-- Right Side - OK, Cancel, Apply Buttons -->
                <StackPanel Grid.Column="1" 
                            Orientation="Horizontal" 
                            HorizontalAlignment="Right">
                    <Button Content="OK" 
                            Style="{StaticResource BottomBarButtonStyle}"
                            Click="OKButton_Click"
                            Margin="0,0,8,0"/>
                    <Button Content="Cancel" 
                            Style="{StaticResource CancelButtonStyle}"
                            Click="CancelButton_Click"
                            Margin="0,0,8,0"/>
                    <Button Content="Apply" 
                            Style="{StaticResource ApplyButtonStyle}"
                            Click="ApplyButton_Click"/>
                </StackPanel>
            </Grid>
        </Border>
        </Grid>
    </DockPanel>
</Window>
