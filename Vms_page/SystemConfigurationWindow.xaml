<Window
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:Vms_page"
        x:Class="Vms_page.SystemConfigurationWindow"
        Title="System Configuration" Height="600" Width="900"
        Background="{DynamicResource BackgroundColor}" WindowStyle="SingleBorderWindow" ResizeMode="CanResize"
        FontFamily="Segoe UI">

    <Window.Resources>
        <!-- Button Style for Bottom Bar -->
        <Style x:Key="BottomBarButtonStyle" TargetType="{x:Type Button}">
            <Setter Property="Background" Value="{DynamicResource PrimaryColor}"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="12,6"/>
            <Setter Property="FontSize" Value="11"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="MinWidth" Value="60"/>
            <Setter Property="Height" Value="26"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type Button}">
                        <Border Background="{TemplateBinding Background}" 
                                CornerRadius="4" 
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" 
                                            VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#1E40AF"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Background" Value="#1D4ED8"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Use default/global ComboBox style to match Operation Log -->

        <!-- Default Button Style -->
        <Style x:Key="DefaultButtonStyle" TargetType="{x:Type Button}" BasedOn="{StaticResource BottomBarButtonStyle}">
            <Setter Property="Background" Value="{DynamicResource TextSecondaryColor}"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#6B7280"/>
                </Trigger>
                <Trigger Property="IsPressed" Value="True">
                    <Setter Property="Background" Value="#4B5563"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- Cancel Button Style -->
        <Style x:Key="CancelButtonStyle" TargetType="{x:Type Button}" BasedOn="{StaticResource BottomBarButtonStyle}">
            <Setter Property="Background" Value="{DynamicResource TextSecondaryColor}"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#6B7280"/>
                </Trigger>
                <Trigger Property="IsPressed" Value="True">
                    <Setter Property="Background" Value="#4B5563"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- Apply Button Style -->
        <Style x:Key="ApplyButtonStyle" TargetType="{x:Type Button}" BasedOn="{StaticResource BottomBarButtonStyle}">
            <Setter Property="Background" Value="{DynamicResource SuccessColor}"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#059669"/>
                </Trigger>
                <Trigger Property="IsPressed" Value="True">
                    <Setter Property="Background" Value="#047857"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- Sidebar Button Style -->
        <Style x:Key="SidebarButtonStyle" TargetType="{x:Type Button}">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="{DynamicResource TextSecondaryColor}"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="12,10"/>
            <Setter Property="Margin" Value="0,0"/>
            <Setter Property="HorizontalAlignment" Value="Stretch"/>
            <Setter Property="HorizontalContentAlignment" Value="Left"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type Button}">
                        <Border x:Name="ButtonBorder" 
                                Background="{TemplateBinding Background}" 
                                CornerRadius="0" 
                                Padding="{TemplateBinding Padding}"
                                Margin="{TemplateBinding Margin}"
                                BorderThickness="0">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                
                                <!-- Content -->
                                <ContentPresenter Grid.Column="0"
                                                HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" 
                                                VerticalAlignment="Center"/>
                                
                                <!-- Chevron Icon -->
                                <TextBlock Grid.Column="1"
                                           Text="▶" 
                                           FontSize="10" 
                                           Foreground="{TemplateBinding Foreground}"
                                           VerticalAlignment="Center"
                                           Margin="8,0,0,0"/>
                            </Grid>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="{DynamicResource MenuHoverColor}"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Background" Value="{DynamicResource MenuHoverColor}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Dropdown Sidebar Button Style -->
        <Style x:Key="DropdownSidebarButtonStyle" TargetType="{x:Type Button}">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="{DynamicResource TextSecondaryColor}"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="12,10"/>
            <Setter Property="Margin" Value="0,0"/>
            <Setter Property="HorizontalAlignment" Value="Stretch"/>
            <Setter Property="HorizontalContentAlignment" Value="Left"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type Button}">
                        <Border x:Name="ButtonBorder" 
                                Background="{TemplateBinding Background}" 
                                CornerRadius="0" 
                                Padding="{TemplateBinding Padding}"
                                Margin="{TemplateBinding Margin}"
                                BorderThickness="0">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                
                                <!-- Content -->
                                <ContentPresenter Grid.Column="0"
                                                HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" 
                                                VerticalAlignment="Center"/>
                                
                                <!-- Dropdown Chevron Icon -->
                                <TextBlock x:Name="ChevronIcon" Grid.Column="1"
                                           Text="▼" 
                                           FontSize="10" 
                                           Foreground="{TemplateBinding Foreground}"
                                           VerticalAlignment="Center"
                                           Margin="8,0,0,0"/>
                            </Grid>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="{DynamicResource MenuHoverColor}"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Background" Value="{DynamicResource MenuHoverColor}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Sub-option Button Style -->
        <Style x:Key="SubOptionButtonStyle" TargetType="{x:Type Button}">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="{DynamicResource TextSecondaryColor}"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="24,8"/>
            <Setter Property="Margin" Value="0,0"/>
            <Setter Property="HorizontalAlignment" Value="Stretch"/>
            <Setter Property="HorizontalContentAlignment" Value="Left"/>
            <Setter Property="FontSize" Value="11"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type Button}">
                        <Border x:Name="ButtonBorder" 
                                Background="{TemplateBinding Background}" 
                                CornerRadius="0" 
                                Padding="{TemplateBinding Padding}"
                                Margin="{TemplateBinding Margin}"
                                BorderThickness="0">
                            <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" 
                                            VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="{DynamicResource MenuHoverColor}"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Background" Value="{DynamicResource MenuHoverColor}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Active Sidebar Button Style -->
        <Style x:Key="ActiveSidebarButtonStyle" TargetType="{x:Type Button}" BasedOn="{StaticResource SidebarButtonStyle}">
            <Setter Property="Background" Value="{DynamicResource MenuHoverColor}"/>
            <Setter Property="Foreground" Value="{DynamicResource PrimaryColor}"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type Button}">
                        <Border x:Name="ButtonBorder" 
                                Background="{TemplateBinding Background}" 
                                CornerRadius="0" 
                                Padding="{TemplateBinding Padding}"
                                Margin="{TemplateBinding Margin}"
                                BorderThickness="3,0,0,0"
                                BorderBrush="{DynamicResource PrimaryColor}">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                
                                <!-- Content -->
                                <ContentPresenter Grid.Column="0"
                                                HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" 
                                                VerticalAlignment="Center"/>
                                
                                <!-- Chevron Icon -->
                                <TextBlock Grid.Column="1"
                                           Text="▶" 
                                           FontSize="10" 
                                           Foreground="{TemplateBinding Foreground}"
                                           VerticalAlignment="Center"
                                           Margin="8,0,0,0"/>
                            </Grid>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="{DynamicResource MenuHoverColor}"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Background" Value="{DynamicResource MenuHoverColor}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Main Content Area -->
        <Grid Grid.Row="0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="180"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- Left Sidebar -->
            <Border Grid.Column="0" 
                    Background="{DynamicResource SidebarColor}" 
                    BorderBrush="{DynamicResource BorderColor}"
                    BorderThickness="0,0,1,0">
                <ScrollViewer VerticalScrollBarVisibility="Auto" 
                              HorizontalScrollBarVisibility="Disabled">
                    <StackPanel Margin="0" Background="Transparent">
                        <!-- Sidebar Content -->
                        <TextBlock Text="System Configuration" 
                                   Foreground="{DynamicResource TextPrimaryColor}" 
                                   FontSize="12" 
                                   FontWeight="SemiBold"
                                   Margin="12,16,12,8"/>
                        
                        <!-- Configuration Options -->
                        <Button x:Name="AudioVideoButton"
                                Content="Audio &amp; Video" 
                                Style="{StaticResource DropdownSidebarButtonStyle}"
                                Click="AudioVideo_Click"
                                Tag="AudioVideo"/>
                        
                        <!-- Audio & Video Sub-options -->
                        <StackPanel x:Name="AudioVideoSubOptions" 
                                    Visibility="Visible">
                            <Button Content="Video" 
                                    Style="{StaticResource SubOptionButtonStyle}"
                                    Click="Video_Click"
                                    Tag="Video"/>
                            <Button Content="Snapshot" 
                                    Style="{StaticResource SubOptionButtonStyle}"
                                    Click="Snapshot_Click"
                                    Tag="Snapshot"/>
                            <Button Content="Recording" 
                                    Style="{StaticResource SubOptionButtonStyle}"
                                    Click="Recording_Click"
                                    Tag="Recording"/>
                            <Button Content="POS OSD Configuration" 
                                    Style="{StaticResource SubOptionButtonStyle}"
                                    Click="PosOsdConfig_Click"
                                    Tag="PosOsdConfig"/>
                        </StackPanel>
                        
                        <Button x:Name="SystemButton"
                                Content="System" 
                                Style="{StaticResource DropdownSidebarButtonStyle}"
                                Click="System_Click"
                                Tag="System"/>
                        
                        <!-- System Sub-options -->
                        <StackPanel x:Name="SystemSubOptions" 
                                    Visibility="Collapsed">
                            <Button Content="Startup" 
                                    Style="{StaticResource SubOptionButtonStyle}"
                                    Click="Startup_Click"
                                    Tag="Startup"/>
                            <Button Content="Log" 
                                    Style="{StaticResource SubOptionButtonStyle}"
                                    Click="Log_Click"
                                    Tag="Log"/>
                            <Button Content="Maintenance" 
                                    Style="{StaticResource SubOptionButtonStyle}"
                                    Click="Maintenance_Click"
                                    Tag="Maintenance"/>
                        </StackPanel>
                        
                        <Button x:Name="OperationButton"
                                Content="Operation" 
                                Style="{StaticResource DropdownSidebarButtonStyle}"
                                Click="Operation_Click"
                                Tag="Operation"/>
                        
                        <!-- Operation Sub-options -->
                        <StackPanel x:Name="OperationSubOptions" 
                                    Visibility="Collapsed">
                            <Button Content="Alarm" 
                                    Style="{StaticResource SubOptionButtonStyle}"
                                    Click="Alarm_Click"
                                    Tag="Alarm"/>
                            <Button Content="Service" 
                                    Style="{StaticResource SubOptionButtonStyle}"
                                    Click="Service_Click"
                                    Tag="Service"/>
                            <Button Content="Email" 
                                    Style="{StaticResource SubOptionButtonStyle}"
                                    Click="Email_Click"
                                    Tag="Email"/>
                            <Button Content="Epidemic Control" 
                                    Style="{StaticResource SubOptionButtonStyle}"
                                    Click="EpidemicControl_Click"
                                    Tag="EpidemicControl"/>
                            <Button Content="Attribute Display" 
                                    Style="{StaticResource SubOptionButtonStyle}"
                                    Click="AttributeDisplay_Click"
                                    Tag="AttributeDisplay"/>
                        </StackPanel>
                    </StackPanel>
                </ScrollViewer>
            </Border>

            <!-- Right Content Area -->
            <Border Grid.Column="1" 
                    Background="{DynamicResource BackgroundColor}">
                <Grid x:Name="RightContentRoot" Margin="8">
                    <!-- Default Placeholder -->
                    <TextBlock x:Name="DefaultPlaceholder" Text="System Configuration Settings" 
                               Foreground="{DynamicResource TextPrimaryColor}" 
                               FontSize="16" 
                               FontWeight="SemiBold"
                               HorizontalAlignment="Center" 
                               VerticalAlignment="Center"/>

                    <!-- Snapshot Panel -->
                    <Grid x:Name="SnapshotPanel" Visibility="Collapsed">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="10"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="10"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="10"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="10"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>

                        <!-- Snapshot Mode -->
                        <TextBlock Grid.Row="0" Grid.Column="0" Text="Snapshot Mode" Foreground="{DynamicResource TextPrimaryColor}" FontSize="12" VerticalAlignment="Center" Margin="0"/>
                        <StackPanel Grid.Row="0" Grid.Column="1" Orientation="Horizontal" Margin="8,0,0,8" HorizontalAlignment="Left">
                            <RadioButton x:Name="SnapshotModeAutoRadio" Content="Auto" GroupName="SnapshotMode" IsChecked="True" Foreground="{DynamicResource TextPrimaryColor}"/>
                            <RadioButton x:Name="SnapshotModeManualRadio" Content="Manual" GroupName="SnapshotMode" Margin="18,0,0,0" Foreground="{DynamicResource TextPrimaryColor}"/>
                        </StackPanel>

                        <!-- Continuous Snapshot Interval -->
                        <TextBlock Grid.Row="2" Grid.Column="0" Text="Continuous Snapshot Interval" Foreground="{DynamicResource TextPrimaryColor}" FontSize="12" VerticalAlignment="Center" Margin="0"/>
                        <ComboBox Grid.Row="2" Grid.Column="1" x:Name="SnapshotIntervalCombo" Width="180" Height="24" SelectedIndex="0" Margin="8,0,0,0" HorizontalAlignment="Left" HorizontalContentAlignment="Stretch">
                            <ComboBox.ItemContainerStyle>
                                <Style TargetType="{x:Type ComboBoxItem}">
                                    <Setter Property="Width" Value="{Binding ActualWidth, RelativeSource={RelativeSource AncestorType=ComboBox}}"/>
                                </Style>
                            </ComboBox.ItemContainerStyle>
                            <ComboBoxItem Content="1 second"/>
                            <ComboBoxItem Content="2 seconds"/>
                            <ComboBoxItem Content="3 seconds"/>
                            <ComboBoxItem Content="5 seconds"/>
                            <ComboBoxItem Content="10 seconds"/>
                        </ComboBox>

                        <!-- Continuous Snapshots -->
                        <TextBlock Grid.Row="4" Grid.Column="0" Text="Continuous Snapshots" Foreground="{DynamicResource TextPrimaryColor}" FontSize="12" VerticalAlignment="Center" Margin="0"/>
                        <ComboBox Grid.Row="4" Grid.Column="1" x:Name="ContinuousSnapshotsCombo" Width="180" Height="24" SelectedIndex="2" Margin="8,0,0,0" HorizontalAlignment="Left" HorizontalContentAlignment="Stretch">
                            <ComboBox.ItemContainerStyle>
                                <Style TargetType="{x:Type ComboBoxItem}">
                                    <Setter Property="Width" Value="{Binding ActualWidth, RelativeSource={RelativeSource AncestorType=ComboBox}}"/>
                                </Style>
                            </ComboBox.ItemContainerStyle>
                            <ComboBoxItem Content="1 pcs"/>
                            <ComboBoxItem Content="2 pcs"/>
                            <ComboBoxItem Content="3 pcs"/>
                            <ComboBoxItem Content="5 pcs"/>
                            <ComboBoxItem Content="10 pcs"/>
                        </ComboBox>

                        <!-- Snapshot Format -->
                        <TextBlock Grid.Row="6" Grid.Column="0" Text="Snapshot Format" Foreground="{DynamicResource TextPrimaryColor}" FontSize="12" VerticalAlignment="Center" Margin="0"/>
                        <StackPanel Grid.Row="6" Grid.Column="1" Orientation="Horizontal" Margin="8,0,0,0" HorizontalAlignment="Left">
                            <RadioButton x:Name="SnapshotFormatJpegRadio" Content="JPEG" GroupName="SnapshotFormat" IsChecked="True" Foreground="{DynamicResource TextPrimaryColor}"/>
                            <RadioButton x:Name="SnapshotFormatBmpRadio" Content="BMP" GroupName="SnapshotFormat" Margin="18,0,0,0" Foreground="{DynamicResource TextPrimaryColor}"/>
                        </StackPanel>

                        <!-- Image Save Path -->
                        <TextBlock Grid.Row="8" Grid.Column="0" Text="Image Save Path" Foreground="{DynamicResource TextPrimaryColor}" FontSize="12" VerticalAlignment="Center" Margin="0"/>
                        <Grid Grid.Row="8" Grid.Column="1" Margin="8,0,0,0" HorizontalAlignment="Left">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <TextBox x:Name="ImageSavePathTextBox" Grid.Column="0" MinWidth="280" Text="C:\\Users\\Public\\Guard Station 3\\Snap\\" Margin="0" Foreground="{DynamicResource TextPrimaryColor}"/>
                            <Button Grid.Column="1" Content="Browse..." Margin="8,0,0,0" Style="{StaticResource BottomBarButtonStyle}" Click="BrowseSnapshotPath_Click"/>
                        </Grid>
                    </Grid>

                    <!-- POS OSD Configuration Panel -->
                    <Grid x:Name="PosOsdConfigPanel" Visibility="Collapsed">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="10"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="10"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="10"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="10"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>

                        <!-- Display Area -->
                        <TextBlock Grid.Row="0" Grid.Column="0" Text="Display Area" Foreground="{DynamicResource TextPrimaryColor}" FontSize="12" VerticalAlignment="Center"/>
                        <ComboBox Grid.Row="0" Grid.Column="1" Width="180" Height="24" Margin="8,0,0,0" SelectedIndex="0" HorizontalContentAlignment="Stretch">
                            <ComboBox.ItemContainerStyle>
                                <Style TargetType="{x:Type ComboBoxItem}">
                                    <Setter Property="Width" Value="{Binding ActualWidth, RelativeSource={RelativeSource AncestorType=ComboBox}}"/>
                                </Style>
                            </ComboBox.ItemContainerStyle>
                            <ComboBoxItem Content="Left"/>
                            <ComboBoxItem Content="Right"/>
                            <ComboBoxItem Content="Top"/>
                            <ComboBoxItem Content="Bottom"/>
                        </ComboBox>

                        <!-- Font Size -->
                        <TextBlock Grid.Row="2" Grid.Column="0" Text="Font Size" Foreground="{DynamicResource TextPrimaryColor}" FontSize="12" VerticalAlignment="Center"/>
                        <ComboBox Grid.Row="2" Grid.Column="1" Width="180" Height="24" Margin="8,0,0,0" SelectedIndex="1" HorizontalContentAlignment="Stretch">
                            <ComboBox.ItemContainerStyle>
                                <Style TargetType="{x:Type ComboBoxItem}">
                                    <Setter Property="Width" Value="{Binding ActualWidth, RelativeSource={RelativeSource AncestorType=ComboBox}}"/>
                                </Style>
                            </ComboBox.ItemContainerStyle>
                            <ComboBoxItem Content="Small"/>
                            <ComboBoxItem Content="Middle"/>
                            <ComboBoxItem Content="Large"/>
                        </ComboBox>

                        <!-- Font Color -->
                        <TextBlock Grid.Row="4" Grid.Column="0" Text="Font Color" Foreground="{DynamicResource TextPrimaryColor}" FontSize="12" VerticalAlignment="Center"/>
                        <Grid Grid.Row="4" Grid.Column="1" Margin="6,0,0,0" HorizontalAlignment="Left">
                            <Border x:Name="FontColorSwatch" Width="66" Height="24" Background="Yellow" CornerRadius="3" MouseDown="FontColorSwatch_Click"/>
                            <Popup x:Name="FontColorPopup" Placement="Bottom" PlacementTarget="{Binding ElementName=FontColorSwatch}" StaysOpen="False">
                                <Border Background="{DynamicResource SurfaceColor}" BorderBrush="{DynamicResource BorderColor}" BorderThickness="1" CornerRadius="4" Padding="6">
                                    <UniformGrid Rows="2" Columns="6" Margin="2">
                                        <Border Width="22" Height="22" Background="#FFFFFF" Margin="2" Tag="#FFFFFF" MouseLeftButtonUp="FontColorOption_Click"/>
                                        <Border Width="22" Height="22" Background="#FFD700" Margin="2" Tag="#FFD700" MouseLeftButtonUp="FontColorOption_Click"/>
                                        <Border Width="22" Height="22" Background="#FF0000" Margin="2" Tag="#FF0000" MouseLeftButtonUp="FontColorOption_Click"/>
                                        <Border Width="22" Height="22" Background="#00FF00" Margin="2" Tag="#00FF00" MouseLeftButtonUp="FontColorOption_Click"/>
                                        <Border Width="22" Height="22" Background="#00BFFF" Margin="2" Tag="#00BFFF" MouseLeftButtonUp="FontColorOption_Click"/>
                                        <Border Width="22" Height="22" Background="#FFA500" Margin="2" Tag="#FFA500" MouseLeftButtonUp="FontColorOption_Click"/>
                                        <Border Width="22" Height="22" Background="#808080" Margin="2" Tag="#808080" MouseLeftButtonUp="FontColorOption_Click"/>
                                        <Border Width="22" Height="22" Background="#C0C0C0" Margin="2" Tag="#C0C0C0" MouseLeftButtonUp="FontColorOption_Click"/>
                                        <Border Width="22" Height="22" Background="#8A2BE2" Margin="2" Tag="#8A2BE2" MouseLeftButtonUp="FontColorOption_Click"/>
                                        <Border Width="22" Height="22" Background="#FF69B4" Margin="2" Tag="#FF69B4" MouseLeftButtonUp="FontColorOption_Click"/>
                                        <Border Width="22" Height="22" Background="#00CED1" Margin="2" Tag="#00CED1" MouseLeftButtonUp="FontColorOption_Click"/>
                                        <Border Width="22" Height="22" Background="#FFFF00" Margin="2" Tag="#FFFF00" MouseLeftButtonUp="FontColorOption_Click"/>
                                    </UniformGrid>
                                </Border>
                            </Popup>
                        </Grid>

                        <!-- Duration -->
                        <TextBlock Grid.Row="6" Grid.Column="0" Text="Duration" Foreground="{DynamicResource TextPrimaryColor}" FontSize="12" VerticalAlignment="Center"/>
                        <StackPanel Grid.Row="6" Grid.Column="1" Orientation="Horizontal" Margin="8,0,0,0" HorizontalAlignment="Left">
                            <RadioButton x:Name="DurationAutoRadio" Content="Auto" GroupName="DurationMode" IsChecked="True" Foreground="{DynamicResource TextPrimaryColor}" Checked="DurationMode_Changed"/>
                            <RadioButton x:Name="DurationCustomRadio" Content="Custom" GroupName="DurationMode" Margin="16,0,0,0" Foreground="{DynamicResource TextPrimaryColor}" Checked="DurationMode_Changed"/>
                            <TextBox x:Name="DurationSecondsTextBox" Width="80" Height="24" Margin="16,0,0,0" IsEnabled="False" Text="5"/>
                            <TextBlock Margin="8,0,0,0" VerticalAlignment="Center" Foreground="{DynamicResource TextPrimaryColor}" Text="Second"/>
                        </StackPanel>

                        <!-- POS Function -->
                        <TextBlock Grid.Row="8" Grid.Column="0" Text="POS Function" Foreground="{DynamicResource TextPrimaryColor}" FontSize="12" VerticalAlignment="Center"/>
                        <StackPanel Grid.Row="8" Grid.Column="1" Orientation="Horizontal" Margin="8,0,0,0" HorizontalAlignment="Left">
                            <RadioButton x:Name="PosFunctionOnRadio" Content="On" GroupName="PosFunction" Foreground="{DynamicResource TextPrimaryColor}"/>
                            <RadioButton x:Name="PosFunctionOffRadio" Content="Off" GroupName="PosFunction" Margin="24,0,0,0" IsChecked="True" Foreground="{DynamicResource TextPrimaryColor}"/>
                        </StackPanel>
                    </Grid>
                </Grid>
            </Border>
        </Grid>

        <!-- Bottom Bar -->
        <Border Grid.Row="1" 
                Background="{DynamicResource SurfaceColor}" 
                BorderBrush="{DynamicResource BorderColor}"
                BorderThickness="0,1,0,0"
                Padding="12,8">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <!-- Left Side - Default Button -->
                <StackPanel Grid.Column="0" 
                            Orientation="Horizontal" 
                            HorizontalAlignment="Left">
                    <Button Content="Default" 
                            Style="{StaticResource DefaultButtonStyle}"
                            Click="DefaultButton_Click"/>
                </StackPanel>

                <!-- Right Side - OK, Cancel, Apply Buttons -->
                <StackPanel Grid.Column="1" 
                            Orientation="Horizontal" 
                            HorizontalAlignment="Right">
                    <Button Content="OK" 
                            Style="{StaticResource BottomBarButtonStyle}"
                            Click="OKButton_Click"
                            Margin="0,0,8,0"/>
                    <Button Content="Cancel" 
                            Style="{StaticResource CancelButtonStyle}"
                            Click="CancelButton_Click"
                            Margin="0,0,8,0"/>
                    <Button Content="Apply" 
                            Style="{StaticResource ApplyButtonStyle}"
                            Click="ApplyButton_Click"/>
                </StackPanel>
            </Grid>
        </Border>
    </Grid>
</Window>
