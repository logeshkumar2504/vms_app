<Window x:Class="Vms_page.LprWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="LPR" Height="700" Width="1100"
        Background="{DynamicResource BackgroundColor}"
        WindowStyle="SingleBorderWindow"
        ResizeMode="CanResize"
        FontFamily="Segoe UI"
        WindowStartupLocation="CenterScreen">

    <Window.Resources>
        <Style x:Key="TopNavButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="{DynamicResource TextSecondaryColor}"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="10,4"/>
            <Setter Property="Margin" Value="0,0,6,0"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                CornerRadius="4"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="{DynamicResource PrimaryColor}"/>
                                <Setter Property="Foreground" Value="White"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Background" Value="{DynamicResource PrimaryColor}"/>
                                <Setter Property="Foreground" Value="White"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <!-- Grid layout button style for bottom toolbar (replicated) -->
        <Style x:Key="GridLayoutButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="{DynamicResource TopBarColor}"/>
            <Setter Property="Foreground" Value="{DynamicResource TextPrimaryColor}"/>
            <Setter Property="BorderBrush" Value="{DynamicResource BorderColor}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="FontSize" Value="11"/>
            <Setter Property="Width" Value="28"/>
            <Setter Property="Height" Value="24"/>
            <Setter Property="Margin" Value="0,0,6,0"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="4">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="{DynamicResource SurfaceColor}"/>
                                <Setter Property="BorderBrush" Value="{DynamicResource PrimaryColor}"/>
                                <Setter Property="Foreground" Value="{DynamicResource TextPrimaryColor}"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Background" Value="{DynamicResource PrimaryColor}"/>
                                <Setter Property="BorderBrush" Value="{DynamicResource PrimaryColor}"/>
                                <Setter Property="Foreground" Value="White"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <!-- Common button styles used by toolbar -->
        <Style x:Key="PrimaryButton" TargetType="Button">
            <Setter Property="Background" Value="{DynamicResource PrimaryColor}"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderBrush" Value="{DynamicResource PrimaryColor}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="18,8"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="MinWidth" Value="96"/>
            <Setter Property="Height" Value="36"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="4">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="{DynamicResource PrimaryColor}"/>
                                <Setter Property="BorderBrush" Value="{DynamicResource PrimaryColor}"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Background" Value="{DynamicResource PrimaryColor}"/>
                                <Setter Property="BorderBrush" Value="{DynamicResource PrimaryColor}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <Style x:Key="SecondaryButton" TargetType="Button">
            <Setter Property="Background" Value="{DynamicResource TopBarColor}"/>
            <Setter Property="Foreground" Value="{DynamicResource TextPrimaryColor}"/>
            <Setter Property="BorderBrush" Value="{DynamicResource BorderColor}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="18,8"/>
            <Setter Property="MinWidth" Value="96"/>
            <Setter Property="Height" Value="36"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="4">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="{DynamicResource SurfaceColor}"/>
                                <Setter Property="BorderBrush" Value="{DynamicResource PrimaryColor}"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Background" Value="{DynamicResource PrimaryColor}"/>
                                <Setter Property="Foreground" Value="White"/>
                                <Setter Property="BorderBrush" Value="{DynamicResource PrimaryColor}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <DockPanel LastChildFill="True">
        <!-- Top Bar (Face Recognition-like) -->
        <Border x:Name="TopNavBar" DockPanel.Dock="Top"
                Height="36"
                Background="{DynamicResource TopBarColor}"
                BorderBrush="{DynamicResource BorderColor}"
                BorderThickness="0,0,0,1">
            <ScrollViewer HorizontalScrollBarVisibility="Disabled" VerticalScrollBarVisibility="Disabled">
                <StackPanel Orientation="Horizontal"
                            HorizontalAlignment="Left"
                            VerticalAlignment="Center"
                            Margin="8,0">
                    <Button Content="Realtime Monitoring"
                            Tag="Realtime Monitoring"
                            Style="{StaticResource TopNavButtonStyle}"
                            Click="NavigationButton_Click"/>
                    <Button Content="Vehicle Library Management"
                            Tag="Plate Library Management"
                            Style="{StaticResource TopNavButtonStyle}"
                            Click="NavigationButton_Click"/>
                    <Button Content="Monitoring Task"
                            Tag="Monitoring Task"
                            Style="{StaticResource TopNavButtonStyle}"
                            Click="NavigationButton_Click"/>
                    <Button Content="Alarm Records"
                            Tag="Alarm Records"
                            Style="{StaticResource TopNavButtonStyle}"
                            Click="NavigationButton_Click"/>
                    <Button Content="Pass Thru Records"
                            Tag="Pass Thru Records"
                            Style="{StaticResource TopNavButtonStyle}"
                            Click="NavigationButton_Click"/>
                </StackPanel>
            </ScrollViewer>
        </Border>

        <!-- Realtime Monitoring layout replicated from Face Recognition -->
        <Grid Background="{DynamicResource BackgroundColor}">
            <Grid.ColumnDefinitions>
                <ColumnDefinition x:Name="LeftColumn" Width="280"/>
                <ColumnDefinition x:Name="MainColumn" Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- Left Sidebar -->
            <Border x:Name="LeftSidebar" Grid.Column="0"
                    Background="{DynamicResource SidebarColor}"
                    BorderBrush="{DynamicResource BorderColor}"
                    BorderThickness="0,0,1,0">
                <StackPanel Margin="12">
                    <!-- Realtime Monitoring sidebar section -->
                    <StackPanel x:Name="VideoChannelSection">
                        <TextBlock Text="Video Channel"
                                   Foreground="{DynamicResource TextPrimaryColor}"
                                   FontSize="11"
                                   FontWeight="SemiBold"
                                   Margin="0,0,0,6"/>
                        <Border Background="{DynamicResource SurfaceColor}"
                                BorderBrush="{DynamicResource BorderColor}"
                                BorderThickness="1"
                                CornerRadius="6"
                                Padding="8,0">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="22"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Grid.Column="0" Text="ðŸ”" FontSize="12" Foreground="{DynamicResource TextSecondaryColor}" VerticalAlignment="Center" HorizontalAlignment="Center"/>
                                <TextBox x:Name="VideoChannelInput" Grid.Column="1"
                                         Background="Transparent"
                                         BorderThickness="0"
                                         Foreground="{DynamicResource TextPrimaryColor}"
                                         FontSize="11"
                                         Padding="0,6,8,6"
                                         CaretBrush="{DynamicResource PrimaryColor}"
                                         VerticalContentAlignment="Center"
                                         VerticalAlignment="Center"
                                         Height="32"
                                         TextWrapping="NoWrap"
                                         ScrollViewer.HorizontalScrollBarVisibility="Hidden"
                                         ScrollViewer.VerticalScrollBarVisibility="Hidden"
                                         MinWidth="200"
                                         HorizontalContentAlignment="Left"
                                         AcceptsReturn="False"
                                         Text="Enter channel name"
                                         GotFocus="VideoChannelInput_GotFocus"
                                         LostFocus="VideoChannelInput_LostFocus"/>
                            </Grid>
                        </Border>

                        <!-- Simple filters -->
                        <StackPanel Margin="0,18,0,0">
                            <TextBlock Text="Filters" FontSize="11" FontWeight="SemiBold" Foreground="{DynamicResource TextPrimaryColor}" Margin="0,0,0,6"/>
                            <TextBlock Text="All Alarms" Foreground="{DynamicResource TextSecondaryColor}" FontSize="11"/>
                        </StackPanel>
                    </StackPanel>

                    <!-- Vehicle Library Management sidebar section -->
                    <StackPanel x:Name="VehicleLibrarySection" Visibility="Collapsed">
                        <TextBlock Text="Vehicle Library"
                                   Foreground="{DynamicResource TextPrimaryColor}"
                                   FontSize="11"
                                   FontWeight="SemiBold"
                                   Margin="0,0,0,6"/>
                        <ComboBox Height="28"
                                  Background="{DynamicResource SurfaceColor}"
                                  Foreground="{DynamicResource TextPrimaryColor}"
                                  BorderBrush="{DynamicResource BorderColor}"
                                  BorderThickness="1">
                            <ComboBoxItem Content="All Libraries" IsSelected="True"/>
                            <ComboBoxItem Content="Default"/>
                            <ComboBoxItem Content="VIP"/>
                        </ComboBox>
                    </StackPanel>

                    <!-- Monitoring Task sidebar section -->
                    <StackPanel x:Name="MonitoringTaskSection" Visibility="Collapsed">
                        <TextBlock Text="Video Channel"
                                   Foreground="{DynamicResource TextPrimaryColor}"
                                   FontSize="11"
                                   FontWeight="SemiBold"
                                   Margin="0,0,0,6"/>
                        <Border Background="{DynamicResource SurfaceColor}"
                                BorderBrush="{DynamicResource BorderColor}"
                                BorderThickness="1"
                                CornerRadius="6"
                                Padding="8,0">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="22"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Grid.Column="0" Text="ðŸ”" FontSize="12" Foreground="{DynamicResource TextSecondaryColor}" VerticalAlignment="Center" HorizontalAlignment="Center"/>
                                <TextBox x:Name="MonitoringTaskChannelInput" Grid.Column="1"
                                         Background="Transparent"
                                         BorderThickness="0"
                                         Foreground="{DynamicResource TextPrimaryColor}"
                                         FontSize="11"
                                         Padding="0,6,8,6"
                                         CaretBrush="{DynamicResource PrimaryColor}"
                                         VerticalContentAlignment="Center"
                                         VerticalAlignment="Center"
                                         Height="32"
                                         TextWrapping="NoWrap"
                                         ScrollViewer.HorizontalScrollBarVisibility="Hidden"
                                         ScrollViewer.VerticalScrollBarVisibility="Hidden"
                                         MinWidth="200"
                                         HorizontalContentAlignment="Left"
                                         AcceptsReturn="False"
                                         Text="Enter channel name"
                                         GotFocus="MonitoringTaskChannelInput_GotFocus"
                                         LostFocus="MonitoringTaskChannelInput_LostFocus"/>
                            </Grid>
                        </Border>
                    </StackPanel>

                    <!-- Alarm Records sidebar section -->
                    <StackPanel x:Name="AlarmRecordsSection" Visibility="Collapsed">
                        <TextBlock Text="Channel"
                                   Foreground="{DynamicResource TextPrimaryColor}"
                                   FontSize="11"
                                   FontWeight="SemiBold"
                                   Margin="0,0,0,6"/>
                        <ComboBox Height="28"
                                  Background="{DynamicResource SurfaceColor}"
                                  Foreground="{DynamicResource TextPrimaryColor}"
                                  BorderBrush="{DynamicResource BorderColor}"
                                  BorderThickness="1">
                            <ComboBoxItem Content="All Alarms" IsSelected="True"/>
                            <ComboBoxItem Content="Critical"/>
                            <ComboBoxItem Content="Warning"/>
                            <ComboBoxItem Content="Info"/>
                        </ComboBox>
                    </StackPanel>
                </StackPanel>
            </Border>

            <!-- Right Content area: switch between Realtime and Vehicle Library views -->
            <Grid Grid.Column="1">
                <!-- Realtime Monitoring view -->
                <DockPanel x:Name="RealtimeView">
                <!-- Bottom controls -->
                <Border x:Name="BottomBar" DockPanel.Dock="Bottom" Height="36" Background="{DynamicResource TopBarColor}" BorderBrush="{DynamicResource BorderColor}" BorderThickness="0">
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Left" VerticalAlignment="Center" Margin="6,0">
                        <Button Tag="1" Style="{StaticResource GridLayoutButtonStyle}" ToolTip="Single Camera View" Click="SetLayout_Click">
                            <Image Source="/Assets/Icons/cctv.png" Width="16" Height="16" Stretch="Uniform"/>
                        </Button>
                        <Button Tag="4" Style="{StaticResource GridLayoutButtonStyle}" ToolTip="4-Camera Grid View" Click="SetLayout_Click">
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="*"/>
                                    <RowDefinition Height="*"/>
                                </Grid.RowDefinitions>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <Image Source="/Assets/Icons/cctv.png" Width="6" Height="6" Grid.Row="0" Grid.Column="0" Stretch="Uniform"/>
                                <Image Source="/Assets/Icons/cctv.png" Width="6" Height="6" Grid.Row="0" Grid.Column="1" Stretch="Uniform"/>
                                <Image Source="/Assets/Icons/cctv.png" Width="6" Height="6" Grid.Row="1" Grid.Column="0" Stretch="Uniform"/>
                                <Image Source="/Assets/Icons/cctv.png" Width="6" Height="6" Grid.Row="1" Grid.Column="1" Stretch="Uniform"/>
                            </Grid>
                        </Button>
                        <Button Tag="fs" Style="{StaticResource GridLayoutButtonStyle}" ToolTip="Fullscreen" Click="Fullscreen_Click">
                            <TextBlock Text="â›¶" FontSize="12"/>
                        </Button>
                    </StackPanel>
                </Border>

                    <!-- Grid area -->
                    <Border x:Name="CameraGridContainer" Background="#000000">
                        <UniformGrid x:Name="CameraTilesHost" Rows="2" Columns="2"/>
                    </Border>
                </DockPanel>

                <!-- Alarm Records view -->
                <Grid x:Name="AlarmRecordsView" Visibility="Collapsed">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <!-- Filters toolbar (Face Recognition style) -->
                    <Border Grid.Row="0"
                            Background="{DynamicResource TopBarColor}"
                            BorderBrush="{DynamicResource BorderColor}"
                            BorderThickness="0,0,0,1"
                            Padding="8,6">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="140"/>
                                <ColumnDefinition Width="12"/>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="220"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>

                            <!-- Monitoring Type -->
                            <TextBlock Grid.Row="0" Grid.Column="0"
                                       VerticalAlignment="Center"
                                       Foreground="{DynamicResource TextSecondaryColor}"
                                       FontSize="12"
                                       Margin="0,0,8,0"
                                       Text="Monitoring Type"/>
                            <ComboBox x:Name="AlarmTypeCombo"
                                      Grid.Row="0" Grid.Column="1"
                                      Height="24"
                                      Background="{DynamicResource SurfaceColor}"
                                      Foreground="{DynamicResource TextPrimaryColor}"
                                      BorderBrush="{DynamicResource BorderColor}"
                                      BorderThickness="1"
                                      MinWidth="120"
                                      FontSize="11">
                                <ComboBoxItem Content="Match Alarm" IsSelected="True"/>
                                <ComboBoxItem Content="All"/>
                                <ComboBoxItem Content="Intrusion"/>
                                <ComboBoxItem Content="Line Crossing"/>
                                <ComboBoxItem Content="Motion"/>
                            </ComboBox>

                            <!-- Alarm Time -->
                            <TextBlock Grid.Row="0" Grid.Column="3"
                                       VerticalAlignment="Center"
                                       Foreground="{DynamicResource TextSecondaryColor}"
                                       FontSize="12"
                                       Margin="0,0,8,0"
                                       Text="Alarm Time"/>

                            <!-- Compact range display with calendar icon -->
                            <Border Grid.Row="0" Grid.Column="4"
                                    Background="{DynamicResource SurfaceColor}"
                                    BorderBrush="{DynamicResource BorderColor}"
                                    BorderThickness="1"
                                    CornerRadius="6"
                                    MinHeight="24"
                                    Padding="6,1">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock x:Name="DateRangeLabel" Grid.Column="0"
                                               Text=""
                                               Foreground="{DynamicResource TextPrimaryColor}"
                                               FontSize="11"
                                               VerticalAlignment="Center"/>
                                    <TextBlock Grid.Column="1"
                                               Text="ðŸ“…"
                                               FontSize="11"
                                               VerticalAlignment="Center"
                                               Margin="8,0,2,0"/>
                                </Grid>
                            </Border>

                            <!-- Quick time selectors -->
                            <WrapPanel Grid.Row="0" Grid.Column="5"
                                        HorizontalAlignment="Left"
                                        VerticalAlignment="Center"
                                        Margin="16,0,0,0">
                                <TextBlock Text="Today"
                                           Foreground="{DynamicResource PrimaryColor}"
                                           Cursor="Hand"
                                           MouseLeftButtonUp="QuickPickToday_Click"
                                           Margin="0,0,12,0"
                                           FontSize="11"/>
                                <TextBlock Text="Last 7 days"
                                           Foreground="{DynamicResource PrimaryColor}"
                                           Cursor="Hand"
                                           MouseLeftButtonUp="QuickPick7_Click"
                                           Margin="0,0,12,0"
                                           FontSize="11"/>
                                <TextBlock Text="Last 30 days"
                                           Foreground="{DynamicResource PrimaryColor}"
                                           Cursor="Hand"
                                           MouseLeftButtonUp="QuickPick30_Click"
                                           Margin="0,0,0,0"
                                           FontSize="11"/>
                            </WrapPanel>

                            <!-- Action buttons and view toggle -->
                            <StackPanel Grid.Row="0" Grid.Column="6"
                                        Orientation="Horizontal"
                                        VerticalAlignment="Center"
                                        Margin="8,0,0,0">
                                <Button x:Name="SearchButton" Style="{StaticResource PrimaryButton}" Height="24" MinWidth="72" Padding="10,2" Content="Search" Click="SearchButton_Click"/>
                                <Button x:Name="ResetButton" Style="{StaticResource SecondaryButton}" Height="24" MinWidth="72" Padding="10,2" Margin="8,0,8,0" Content="Reset" Click="ResetButton_Click"/>
                                <Button Style="{StaticResource GridLayoutButtonStyle}" ToolTip="Grid View"><TextBlock Text="â–¦"/></Button>
                                <Button Style="{StaticResource GridLayoutButtonStyle}" ToolTip="List View"><TextBlock Text="â‰£"/></Button>
                            </StackPanel>

                            <!-- Row 2: Plate Color + Plate No -->
                            <TextBlock Grid.Row="1" Grid.Column="0"
                                       VerticalAlignment="Center"
                                       Foreground="{DynamicResource TextSecondaryColor}"
                                       FontSize="12"
                                       Margin="0,8,8,0"
                                       Text="Plate Color"/>
                            <ComboBox x:Name="PlateColorCombo"
                                      Grid.Row="1" Grid.Column="1"
                                      Height="24"
                                      Margin="0,8,0,0"
                                      Background="{DynamicResource SurfaceColor}"
                                      Foreground="{DynamicResource TextPrimaryColor}"
                                      BorderBrush="{DynamicResource BorderColor}"
                                      BorderThickness="1"
                                      MinWidth="120"
                                      FontSize="11">
                                <ComboBoxItem Content="All" IsSelected="True"/>
                                <ComboBoxItem Content="Blue"/>
                                <ComboBoxItem Content="Yellow"/>
                                <ComboBoxItem Content="White"/>
                                <ComboBoxItem Content="Black"/>
                                <ComboBoxItem Content="Green"/>
                            </ComboBox>

                            <TextBlock Grid.Row="1" Grid.Column="3"
                                       VerticalAlignment="Center"
                                       Foreground="{DynamicResource TextSecondaryColor}"
                                       FontSize="12"
                                       Margin="0,8,8,0"
                                       Text="Plate No"/>
                            <TextBox x:Name="PlateNoInput"
                                     Grid.Row="1" Grid.Column="4"
                                     Height="24"
                                     Margin="0,8,0,0"
                                     Background="{DynamicResource SurfaceColor}"
                                     Foreground="{DynamicResource TextPrimaryColor}"
                                     BorderBrush="{DynamicResource BorderColor}"
                                     BorderThickness="1"
                                     Padding="6,1"
                                     Text="Enter plate number"
                                     GotFocus="PlateNoInput_GotFocus"
                                     LostFocus="PlateNoInput_LostFocus"/>

                            <!-- Row 3: Vehicle Color + Cause -->
                            <TextBlock Grid.Row="2" Grid.Column="0"
                                       VerticalAlignment="Center"
                                       Foreground="{DynamicResource TextSecondaryColor}"
                                       FontSize="12"
                                       Margin="0,8,8,0"
                                       Text="Vehicle Color"/>
                            <ComboBox x:Name="VehicleColorCombo"
                                      Grid.Row="2" Grid.Column="1"
                                      Height="24"
                                      Margin="0,8,0,0"
                                      Background="{DynamicResource SurfaceColor}"
                                      Foreground="{DynamicResource TextPrimaryColor}"
                                      BorderBrush="{DynamicResource BorderColor}"
                                      BorderThickness="1"
                                      MinWidth="120"
                                      FontSize="11">
                                <ComboBoxItem Content="All" IsSelected="True"/>
                                <ComboBoxItem Content="Black"/>
                                <ComboBoxItem Content="White"/>
                                <ComboBoxItem Content="Silver"/>
                                <ComboBoxItem Content="Blue"/>
                                <ComboBoxItem Content="Red"/>
                                <ComboBoxItem Content="Green"/>
                            </ComboBox>

                            <TextBlock Grid.Row="2" Grid.Column="3"
                                       VerticalAlignment="Center"
                                       Foreground="{DynamicResource TextSecondaryColor}"
                                       FontSize="12"
                                       Margin="0,8,8,0"
                                       Text="Cause"/>
                            <ComboBox x:Name="CauseCombo"
                                      Grid.Row="2" Grid.Column="4"
                                      Height="24"
                                      Margin="0,8,0,0"
                                      Background="{DynamicResource SurfaceColor}"
                                      Foreground="{DynamicResource TextPrimaryColor}"
                                      BorderBrush="{DynamicResource BorderColor}"
                                      BorderThickness="1"
                                      MinWidth="120"
                                      FontSize="11">
                                <ComboBoxItem Content="All" IsSelected="True"/>
                                <ComboBoxItem Content="Match"/>
                                <ComboBoxItem Content="Intrusion"/>
                                <ComboBoxItem Content="Line Crossing"/>
                                <ComboBoxItem Content="Motion"/>
                            </ComboBox>
                        </Grid>
                    </Border>

                    <!-- Main content: title + export, then results -->
                    <Grid Grid.Row="1" Background="{DynamicResource BackgroundColor}">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>

                        <!-- Page header -->
                        <Border Grid.Row="0"
                                Background="{DynamicResource SurfaceColor}"
                                BorderBrush="{DynamicResource BorderColor}"
                                BorderThickness="0,0,0,1"
                                Padding="12,8">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>

                                <StackPanel Grid.Column="0" Orientation="Horizontal" VerticalAlignment="Center">
                                    <TextBlock Text="ðŸš¨" FontSize="16" Margin="0,0,8,0" VerticalAlignment="Center"/>
                                    <TextBlock Text="Alarm Records" Foreground="{DynamicResource TextPrimaryColor}" FontSize="14" FontWeight="SemiBold" VerticalAlignment="Center"/>
                                </StackPanel>

                                <Button Grid.Column="1" Style="{StaticResource PrimaryButton}" Height="28" MinWidth="90" Padding="12,4">
                                    <Button.Content>
                                        <StackPanel Orientation="Horizontal">
                                            <TextBlock Text="ðŸ“¤" FontSize="12" Margin="0,0,6,0" VerticalAlignment="Center"/>
                                            <TextBlock Text="Export" FontSize="11" VerticalAlignment="Center"/>
                                        </StackPanel>
                                    </Button.Content>
                                </Button>
                            </Grid>
                        </Border>

                        <!-- Results list -->
                        <Border Grid.Row="1" Background="{DynamicResource BackgroundColor}">
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="36"/>
                                    <RowDefinition Height="*"/>
                                </Grid.RowDefinitions>

                                <!-- Custom header row to match Monitoring Task design -->
                                <Grid Grid.Row="0" Background="{DynamicResource TopBarColor}" SnapsToDevicePixels="True">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="170"/>
                                        <ColumnDefinition Width="150"/>
                                        <ColumnDefinition Width="110"/>
                                        <ColumnDefinition Width="120"/>
                                        <ColumnDefinition Width="160"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <Border BorderBrush="{DynamicResource BorderColor}" BorderThickness="0,0,0,1"/>
                                    <TextBlock Grid.Column="0" Text="Time" Foreground="{DynamicResource TextPrimaryColor}" Margin="10,0" VerticalAlignment="Center"/>
                                    <TextBlock Grid.Column="1" Text="Plate No." Foreground="{DynamicResource TextPrimaryColor}" Margin="10,0" VerticalAlignment="Center"/>
                                    <TextBlock Grid.Column="2" Text="Plate Color" Foreground="{DynamicResource TextPrimaryColor}" Margin="10,0" VerticalAlignment="Center"/>
                                    <TextBlock Grid.Column="3" Text="Vehicle Color" Foreground="{DynamicResource TextPrimaryColor}" Margin="10,0" VerticalAlignment="Center"/>
                                    <TextBlock Grid.Column="4" Text="Cause" Foreground="{DynamicResource TextPrimaryColor}" Margin="10,0" VerticalAlignment="Center"/>
                                </Grid>

                                <!-- Body: hide GridView headers, use divider rows like Monitoring Task -->
                                <ListView Grid.Row="1"
                                          x:Name="AlarmRecordsList"
                                          Margin="0,0,0,0"
                                          Background="{DynamicResource BackgroundColor}"
                                          Foreground="{DynamicResource TextPrimaryColor}"
                                          BorderThickness="0"
                                          ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                                          ScrollViewer.VerticalScrollBarVisibility="Auto">
                                    <ListView.Resources>
                                        <Style TargetType="GridViewColumnHeader">
                                            <Setter Property="Visibility" Value="Collapsed"/>
                                            <Setter Property="Height" Value="0"/>
                                        </Style>
                                        <Style TargetType="ListViewItem">
                                            <Setter Property="Background" Value="Transparent"/>
                                            <Setter Property="Foreground" Value="{DynamicResource TextPrimaryColor}"/>
                                            <Setter Property="BorderThickness" Value="0,0,0,1"/>
                                            <Setter Property="BorderBrush" Value="{DynamicResource BorderColor}"/>
                                            <Setter Property="Padding" Value="8,6"/>
                                            <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
                                            <Style.Triggers>
                                                <Trigger Property="IsSelected" Value="True">
                                                    <Setter Property="Background" Value="Transparent"/>
                                                    <Setter Property="BorderBrush" Value="{DynamicResource PrimaryColor}"/>
                                                </Trigger>
                                            </Style.Triggers>
                                        </Style>
                                    </ListView.Resources>
                                    <ListView.View>
                                        <GridView AllowsColumnReorder="False">
                                            <GridViewColumn Width="170" DisplayMemberBinding="{Binding Time}"/>
                                            <GridViewColumn Width="150" DisplayMemberBinding="{Binding PlateNo}"/>
                                            <GridViewColumn Width="110" DisplayMemberBinding="{Binding PlateColor}"/>
                                            <GridViewColumn Width="120" DisplayMemberBinding="{Binding VehicleColor}"/>
                                            <GridViewColumn Width="160" DisplayMemberBinding="{Binding Cause}"/>
                                        </GridView>
                                    </ListView.View>
                                </ListView>
                            </Grid>
                        </Border>
                    </Grid>
                </Grid>

                <!-- Vehicle Library Management view -->
                <Grid x:Name="VehicleLibraryView" Visibility="Collapsed">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <!-- Toolbar -->
                    <StackPanel Grid.Row="0" Orientation="Horizontal" HorizontalAlignment="Left" Margin="8,6,8,6">
                        <Button Style="{StaticResource SecondaryButton}" Height="28" Padding="10,4" Margin="0,0,6,0">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="+" FontSize="12" Margin="0,0,6,0"/>
                                <TextBlock Text="Add"/>
                            </StackPanel>
                        </Button>
                        <Button Style="{StaticResource SecondaryButton}" Height="28" Padding="10,4" Margin="0,0,6,0">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="ðŸ—‘" FontSize="12" Margin="0,0,6,0"/>
                                <TextBlock Text="Delete"/>
                            </StackPanel>
                        </Button>
                        <Button Style="{StaticResource SecondaryButton}" Height="28" Padding="10,4" Margin="0,0,6,0">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="ðŸ“¥" FontSize="12" Margin="0,0,6,0"/>
                                <TextBlock Text="Import"/>
                            </StackPanel>
                        </Button>
                        <Button Style="{StaticResource SecondaryButton}" Height="28" Padding="10,4" Margin="0,0,6,0">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="ðŸ“¤" FontSize="12" Margin="0,0,6,0"/>
                                <TextBlock Text="Export"/>
                            </StackPanel>
                        </Button>
                        <Button Style="{StaticResource SecondaryButton}" Height="28" Padding="10,4">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="â¬‡" FontSize="12" Margin="0,0,6,0"/>
                                <TextBlock Text="Download Template"/>
                            </StackPanel>
                        </Button>
                    </StackPanel>

                    <!-- Table with two columns: Plate No. and Operation (edge-aligned like reference) -->
                    <Border Grid.Row="1" Background="{DynamicResource BackgroundColor}" BorderBrush="Transparent" BorderThickness="0" Margin="0,0,0,0">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="36"/>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>

                            <!-- Header -->
                            <Grid Grid.Row="0" Background="{DynamicResource TopBarColor}" SnapsToDevicePixels="True">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="36"/>
                                    <ColumnDefinition Width="2*"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <Border BorderBrush="{DynamicResource BorderColor}" BorderThickness="0,0,0,1"/>
                                <CheckBox Grid.Column="0" VerticalAlignment="Center" HorizontalAlignment="Center"/>
                                <TextBlock Grid.Column="1" Text="Plate No." Foreground="{DynamicResource TextPrimaryColor}" Margin="10,0" VerticalAlignment="Center"/>
                                <TextBlock Grid.Column="2" Text="Operation" Foreground="{DynamicResource TextPrimaryColor}" Margin="10,0" VerticalAlignment="Center"/>
                            </Grid>

                            <!-- Body: empty list placeholder now, styled for future data -->
                            <ListView Grid.Row="1"
                                      Background="{DynamicResource BackgroundColor}"
                                      Foreground="{DynamicResource TextPrimaryColor}"
                                      BorderThickness="0"
                                      ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                                      ScrollViewer.VerticalScrollBarVisibility="Auto">
                                <ListView.Resources>
                                    <!-- Hide ListView GridView header to avoid double headers -->
                                    <Style TargetType="GridViewColumnHeader">
                                        <Setter Property="Visibility" Value="Collapsed"/>
                                        <Setter Property="Height" Value="0"/>
                                    </Style>
                                    <Style TargetType="ListViewItem">
                                        <Setter Property="Background" Value="Transparent"/>
                                        <Setter Property="Foreground" Value="{DynamicResource TextPrimaryColor}"/>
                                        <Setter Property="BorderThickness" Value="0,0,0,1"/>
                                        <Setter Property="BorderBrush" Value="{DynamicResource BorderColor}"/>
                                        <Setter Property="Padding" Value="8,8"/>
                                        <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
                                        <Style.Triggers>
                                            <Trigger Property="IsMouseOver" Value="True">
                                                <Setter Property="Background" Value="{DynamicResource SurfaceColor}"/>
                                            </Trigger>
                                            <Trigger Property="IsSelected" Value="True">
                                                <Setter Property="Background" Value="{DynamicResource SurfaceColor}"/>
                                                <Setter Property="BorderBrush" Value="{DynamicResource PrimaryColor}"/>
                                            </Trigger>
                                        </Style.Triggers>
                                    </Style>
                                </ListView.Resources>
                                <ListView.View>
                                    <GridView AllowsColumnReorder="False">
                                        <GridViewColumn Width="36">
                                            <GridViewColumn.CellTemplate>
                                                <DataTemplate>
                                                    <CheckBox HorizontalAlignment="Center"/>
                                                </DataTemplate>
                                            </GridViewColumn.CellTemplate>
                                        </GridViewColumn>
                                        <GridViewColumn Header="Plate No." Width="350" DisplayMemberBinding="{Binding PlateNo}"/>
                                        <GridViewColumn Header="Operation" Width="240">
                                            <GridViewColumn.CellTemplate>
                                                <DataTemplate>
                                                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Left">
                                                        <Button Style="{StaticResource SecondaryButton}" Height="24" Padding="10,2" MinWidth="72" Margin="0,0,6,0" Content="Edit"/>
                                                        <Button Style="{StaticResource SecondaryButton}" Height="24" Padding="10,2" MinWidth="72" Content="Delete"/>
                                                    </StackPanel>
                                                </DataTemplate>
                                            </GridViewColumn.CellTemplate>
                                        </GridViewColumn>
                                    </GridView>
                                </ListView.View>
                                <!-- Empty for now; headers show and body scrolls -->
                            </ListView>
                        </Grid>
                    </Border>
                </Grid>

                <!-- Monitoring Task view -->
                <Grid x:Name="MonitoringTaskView" Visibility="Collapsed">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

					<!-- Toolbar -->
					<StackPanel Grid.Row="0" Orientation="Horizontal" HorizontalAlignment="Left" Margin="8,6,8,6">
						<Button Style="{StaticResource SecondaryButton}" Height="28" Padding="10,4" Margin="0,0,6,0">
							<StackPanel Orientation="Horizontal">
								<TextBlock Text="+" FontSize="12" Margin="0,0,6,0"/>
								<TextBlock Text="Add"/>
							</StackPanel>
						</Button>
						<Button Style="{StaticResource SecondaryButton}" Height="28" Padding="10,4">
							<StackPanel Orientation="Horizontal">
								<TextBlock Text="ðŸ—‘" FontSize="12" Margin="0,0,6,0"/>
								<TextBlock Text="Delete"/>
							</StackPanel>
						</Button>
					</StackPanel>

					<!-- Table: checkbox, Name, Remarks, Alarm Type, Operation -->
					<Border Grid.Row="1" Background="{DynamicResource BackgroundColor}" BorderBrush="Transparent" BorderThickness="0" Margin="0,0,0,0">
						<Grid>
							<Grid.RowDefinitions>
								<RowDefinition Height="36"/>
								<RowDefinition Height="*"/>
							</Grid.RowDefinitions>

							<!-- Header -->
							<Grid Grid.Row="0" Background="{DynamicResource TopBarColor}" SnapsToDevicePixels="True">
								<Grid.ColumnDefinitions>
									<ColumnDefinition Width="36"/>
									<ColumnDefinition Width="2*"/>
									<ColumnDefinition Width="2*"/>
									<ColumnDefinition Width="*"/>
									<ColumnDefinition Width="220"/>
								</Grid.ColumnDefinitions>
								<Border BorderBrush="{DynamicResource BorderColor}" BorderThickness="0,0,0,1"/>
								<CheckBox Grid.Column="0" VerticalAlignment="Center" HorizontalAlignment="Center"/>
								<TextBlock Grid.Column="1" Text="Name" Foreground="{DynamicResource TextPrimaryColor}" Margin="10,0" VerticalAlignment="Center"/>
								<TextBlock Grid.Column="2" Text="Remarks" Foreground="{DynamicResource TextPrimaryColor}" Margin="10,0" VerticalAlignment="Center"/>
								<TextBlock Grid.Column="3" Text="Alarm Type" Foreground="{DynamicResource TextPrimaryColor}" Margin="10,0" VerticalAlignment="Center"/>
								<TextBlock Grid.Column="4" Text="Operation" Foreground="{DynamicResource TextPrimaryColor}" Margin="10,0" VerticalAlignment="Center"/>
							</Grid>

							<!-- Body -->
							<ListView Grid.Row="1"
									  Background="{DynamicResource BackgroundColor}"
									  Foreground="{DynamicResource TextPrimaryColor}"
									  BorderThickness="0"
									  ScrollViewer.HorizontalScrollBarVisibility="Disabled"
									  ScrollViewer.VerticalScrollBarVisibility="Auto">
								<ListView.Resources>
									<!-- Hide ListView GridView header to avoid double headers -->
									<Style TargetType="GridViewColumnHeader">
										<Setter Property="Visibility" Value="Collapsed"/>
										<Setter Property="Height" Value="0"/>
									</Style>
									<Style TargetType="ListViewItem">
										<Setter Property="Background" Value="Transparent"/>
										<Setter Property="Foreground" Value="{DynamicResource TextPrimaryColor}"/>
										<Setter Property="BorderThickness" Value="0,0,0,1"/>
										<Setter Property="BorderBrush" Value="{DynamicResource BorderColor}"/>
										<Setter Property="Padding" Value="8,8"/>
										<Setter Property="HorizontalContentAlignment" Value="Stretch"/>
										<Style.Triggers>
											<Trigger Property="IsMouseOver" Value="True">
												<Setter Property="Background" Value="{DynamicResource SurfaceColor}"/>
											</Trigger>
											<Trigger Property="IsSelected" Value="True">
												<Setter Property="Background" Value="{DynamicResource SurfaceColor}"/>
												<Setter Property="BorderBrush" Value="{DynamicResource PrimaryColor}"/>
											</Trigger>
										</Style.Triggers>
									</Style>
								</ListView.Resources>
								<ListView.View>
									<GridView AllowsColumnReorder="False">
										<GridViewColumn Width="36">
											<GridViewColumn.CellTemplate>
												<DataTemplate>
													<CheckBox HorizontalAlignment="Center"/>
												</DataTemplate>
											</GridViewColumn.CellTemplate>
										</GridViewColumn>
										<GridViewColumn Header="Name" Width="320" DisplayMemberBinding="{Binding Name}"/>
										<GridViewColumn Header="Remarks" Width="320" DisplayMemberBinding="{Binding Remarks}"/>
										<GridViewColumn Header="Alarm Type" Width="220" DisplayMemberBinding="{Binding AlarmType}"/>
										<GridViewColumn Header="Operation" Width="220">
											<GridViewColumn.CellTemplate>
												<DataTemplate>
													<StackPanel Orientation="Horizontal" HorizontalAlignment="Left">
														<Button Style="{StaticResource SecondaryButton}" Height="24" Padding="10,2" MinWidth="72" Margin="0,0,6,0" Content="Edit"/>
														<Button Style="{StaticResource SecondaryButton}" Height="24" Padding="10,2" MinWidth="72" Content="Delete"/>
													</StackPanel>
												</DataTemplate>
											</GridViewColumn.CellTemplate>
										</GridViewColumn>
									</GridView>
								</ListView.View>
								<!-- Items can be bound later -->
							</ListView>
						</Grid>
					</Border>
                </Grid>
            </Grid>
        </Grid>
    </DockPanel>
</Window>


