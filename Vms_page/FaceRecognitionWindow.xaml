<Window x:Class="Vms_page.FaceRecognitionWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Face Recognition" Height="700" Width="1100"
        Background="{DynamicResource BackgroundColor}"
        WindowStyle="SingleBorderWindow"
        ResizeMode="CanResize"
        FontFamily="Segoe UI"
        WindowStartupLocation="CenterScreen">

    <Window.Resources>
        <DropShadowEffect x:Key="CardShadow"
                          Color="#000000"
                          Direction="270"
                          ShadowDepth="2"
                          Opacity="0.1"
                          BlurRadius="8"/>

        <!-- Input container style with focus highlight -->
        <Style x:Key="InputContainerStyle" TargetType="Border">
            <Setter Property="Background" Value="{DynamicResource SurfaceColor}"/>
            <Setter Property="BorderBrush" Value="{DynamicResource BorderColor}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="CornerRadius" Value="6"/>
            <Setter Property="Padding" Value="4,3"/>
            <Style.Triggers>
                <Trigger Property="IsKeyboardFocusWithin" Value="True">
                    <Setter Property="BorderBrush" Value="{DynamicResource PrimaryColor}"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- Top navigation button style -->
        <Style x:Key="TopNavButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="{DynamicResource TextSecondaryColor}"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="10,4"/>
            <Setter Property="Margin" Value="0,0,6,0"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                CornerRadius="4"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#2563EB"/>
                                <Setter Property="Foreground" Value="White"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Background" Value="#1D4ED8"/>
                                <Setter Property="Foreground" Value="White"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Grid layout button style - neutral grey for dark theme -->
        <Style x:Key="GridLayoutButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="#3A3A3A"/>
            <Setter Property="Foreground" Value="#E2E8F0"/>
            <Setter Property="BorderBrush" Value="#555555"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="FontSize" Value="11"/>
            <Setter Property="Width" Value="28"/>
            <Setter Property="Height" Value="24"/>
            <Setter Property="Margin" Value="0,0,6,0"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="4">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#4A4A4A"/>
                                <Setter Property="BorderBrush" Value="#666666"/>
                                <Setter Property="Foreground" Value="#FFFFFF"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Background" Value="#5A5A5A"/>
                                <Setter Property="BorderBrush" Value="#777777"/>
                                <Setter Property="Foreground" Value="#FFFFFF"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Toolbar icon button style (audio/settings/close) - grey variant -->
        <Style x:Key="ToolbarIconButtonStyle" TargetType="Button" BasedOn="{StaticResource GridLayoutButtonStyle}">
            <Setter Property="Width" Value="28"/>
            <Setter Property="Height" Value="24"/>
            <Setter Property="Margin" Value="6,0,0,0"/>
        </Style>
    </Window.Resources>

    <DockPanel LastChildFill="True">
        <!-- Top Bar (compact) -->
        <Border DockPanel.Dock="Top"
                Height="36"
                Background="{DynamicResource TopBarColor}"
                BorderBrush="{DynamicResource BorderColor}"
                BorderThickness="0,0,0,1">
            <ScrollViewer HorizontalScrollBarVisibility="Disabled" VerticalScrollBarVisibility="Disabled">
                <StackPanel Orientation="Horizontal"
                            HorizontalAlignment="Left"
                            VerticalAlignment="Center"
                            Margin="8,0">
                    <Button Content="Realtime Monitoring"
                            Tag="Realtime Monitoring"
                            Style="{StaticResource TopNavButtonStyle}"
                            Foreground="{DynamicResource PrimaryColor}"
                            Click="NavigationButton_Click"/>
                    <Button Content="Face Library Management"
                            Tag="Face Library Management"
                            Style="{StaticResource TopNavButtonStyle}"
                            Click="NavigationButton_Click"/>
                    <Button Content="Monitoring Task"
                            Tag="Monitoring Task"
                            Style="{StaticResource TopNavButtonStyle}"
                            Click="NavigationButton_Click"/>
                    <Button Content="Alarm Records"
                            Tag="Alarm Records"
                            Style="{StaticResource TopNavButtonStyle}"
                            Click="NavigationButton_Click"/>
                    <Button Content="Pass Thru Records"
                            Tag="Pass Thru Records"
                            Style="{StaticResource TopNavButtonStyle}"
                            Click="NavigationButton_Click"/>
                    <Button Content="Search by Image"
                            Tag="Search by Image"
                            Style="{StaticResource TopNavButtonStyle}"
                            Click="NavigationButton_Click"/>
                </StackPanel>
            </ScrollViewer>
        </Border>

        <!-- Main Area -->
        <Grid Background="{DynamicResource BackgroundColor}">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="200"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- Left Sidebar (visible for Realtime Monitoring) -->
            <Border x:Name="LeftSidebar" Grid.Column="0"
                    Background="{DynamicResource SidebarColor}"
                    BorderBrush="{DynamicResource BorderColor}"
                    BorderThickness="0,0,1,0"
                    Visibility="Visible">
                <StackPanel Margin="8">
                    <TextBlock Text="Video Channel" 
                               Foreground="{DynamicResource TextPrimaryColor}"
                               FontSize="11" 
                               FontWeight="SemiBold"
                               Margin="0,0,0,6"/>
                    <Border Style="{StaticResource InputContainerStyle}" MinHeight="28">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Grid.Column="0"
                                       Text="ðŸŽ¦"
                                       FontSize="12"
                                       VerticalAlignment="Center"
                                       Margin="6,0,4,0"
                                       Foreground="{DynamicResource TextPrimaryColor}"/>
                            <TextBox Grid.Column="1" x:Name="VideoChannelInput"
                                     Background="Transparent"
                                     BorderThickness="0"
                                     Foreground="{DynamicResource TextPrimaryColor}"
                                     FontSize="11"
                                     FontWeight="Medium"
                                     Padding="2,0,2,0"
                                     Margin="0,0,6,0"
                                     CaretBrush="{DynamicResource PrimaryColor}"
                                     VerticalContentAlignment="Center"
                                     Height="24"
                                     Text="Enter channel name"
                                     GotFocus="VideoChannelInput_GotFocus"
                                     LostFocus="VideoChannelInput_LostFocus"/>
                        </Grid>
                    </Border>
                </StackPanel>
            </Border>

            <!-- Content: empty page placeholder with header -->
            <Border Grid.Column="1" Background="{DynamicResource CardBackgroundColor}" Margin="0,0,199,12">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <!-- Section header reflecting selection -->

                    <!-- Realtime Monitoring Camera Grid (borrowed style from PeopleCounting) -->
                    <Grid x:Name="RealtimeGrid" Grid.Row="1" Visibility="Visible">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="*"/>
                            <RowDefinition Height="36"/>
                            <RowDefinition Height="160"/>
                        </Grid.RowDefinitions>

                        <!-- Tiles host -->
                        <UniformGrid x:Name="CameraTilesHost" Grid.Row="0" Rows="2" Columns="2"/>

                        <!-- Bottom toolbar similar to reference -->
                        <Border Grid.Row="1"
                                Background="#2A2A2A"
                                BorderBrush="#404040"
                                BorderThickness="1,1,1,0">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>

                                <!-- Left: layout buttons and close -->
                                <StackPanel Grid.Column="0" Orientation="Horizontal" VerticalAlignment="Center" Margin="8,0">
                                    <Button Content="â–¡" Style="{StaticResource GridLayoutButtonStyle}" Margin="0,0,6,0" ToolTip="Single View" Click="SetLayout_Click" Tag="1"/>
                                    <Button Content="âŠŸ" Style="{StaticResource GridLayoutButtonStyle}" Margin="0,0,6,0" ToolTip="2 View" Click="SetLayout_Click" Tag="2"/>
                                    <Button Content="âŠž" Style="{StaticResource GridLayoutButtonStyle}" Margin="0,0,6,0" ToolTip="4 View" Click="SetLayout_Click" Tag="4"/>
                                    <Button Content="âœ•" Style="{StaticResource ToolbarIconButtonStyle}" ToolTip="Close"/>
                                </StackPanel>

                                <!-- Center: slider indicator -->
                                <StackPanel Grid.Column="1" Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Center"/>

                                <!-- Right: small icons -->
                                <StackPanel Grid.Column="2" Orientation="Horizontal" VerticalAlignment="Center" Margin="0,0,8,0">
                                    <Button Content="âš™" Style="{StaticResource ToolbarIconButtonStyle}" ToolTip="Settings"/>
                                </StackPanel>
                            </Grid>
                        </Border>

                        <!-- Snapshots panel -->
                        <Border Grid.Row="2"
                                Background="#1A1A1A"
                                BorderBrush="#404040"
                                BorderThickness="1,0,1,1">
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="28"/>
                                    <RowDefinition Height="*"/>
                                </Grid.RowDefinitions>
                                <Border Grid.Row="0" Background="#2A2A2A" BorderBrush="#404040" BorderThickness="0,0,0,1">
                                    <Grid>
                                        <TextBlock Text="Snapshots" Foreground="White" FontSize="12" VerticalAlignment="Center" Margin="8,0,0,0"/>
                                        <TextBlock Text="More >" Foreground="#4A9EFF" FontSize="11" VerticalAlignment="Center" HorizontalAlignment="Right" Margin="0,0,8,0"/>
                                    </Grid>
                                </Border>
                                <Grid Grid.Row="1">
                                    <TextBlock Text="No snapshots yet" Foreground="#666666" FontSize="12" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                </Grid>
                            </Grid>
                        </Border>
                    </Grid>

                    <!-- Empty state for other tabs -->
                    <Grid x:Name="EmptyState" Grid.Row="1" Visibility="Collapsed">
                        <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center" Margin="12">
                            <TextBlock Text="ðŸ§ª" FontSize="44" Foreground="{DynamicResource TextSecondaryColor}" HorizontalAlignment="Center"/>
                            <TextBlock Text="Content will appear here" Foreground="{DynamicResource TextSecondaryColor}" FontSize="13" HorizontalAlignment="Center" Margin="0,10,0,0"/>
                        </StackPanel>
                    </Grid>
                </Grid>
            </Border>
        </Grid>
    </DockPanel>
</Window>

